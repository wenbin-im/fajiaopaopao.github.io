{"pages":[{"title":"","text":"å…³äºæˆ‘å‰ç«¯ï¼Œç°å±…åŒ—äº¬ åŠªåŠ›æé«˜è‡ªå·±çš„å§¿åŠ¿æ°´å¹³ä¸­~","link":"/about/index.html"}],"posts":[{"title":"H5å›¾ç‰‡ä¸Šä¼ è¸©å‘è®°å½•","text":"æœ€è¿‘å†™çš„ä¸€ä¸ªé¡¹ç›®ä¸­å›¾ç‰‡ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½ï¼Œè¿è¥åŒå­¦åé¦ˆç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å‡ºç°äº†ç…§ç‰‡å†…å®¹å˜é»‘é”™ä¹±ã€ä¸Šä¼ ç…§ç‰‡å¤§å°ä¸º0å­—èŠ‚ç­‰å¥‡æ€ªé—®é¢˜ï¼Œä¸‹é¢å°±è®°å½•ä¸‹å¤„ç†é—®é¢˜çš„è¿‡ç¨‹ã€‚ å‰è¨€æˆ‘ä»¬å¸¸ç”¨H5ä¸Šä¼ å›¾ç‰‡æ–¹å¼ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š åˆ©ç”¨ input å’Œ form è¡¨å•è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯æ— æ³•å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ã€æ—‹è½¬ç­‰ä¼˜åŒ–å¤„ç†ã€‚ åˆ©ç”¨RenderFileçš„readAsDataURLè½¬æˆbase64è¿›è¡Œä¸Šä¼ ï¼Œä½†æ˜¯base64ç¼–ç é€šå¸¸æ¯”æ‰€å¯¹åº”çš„å›¾ç‰‡äºŒè¿›åˆ¶æ–‡ä»¶ä½“ç§¯è¦æ›´å¤§ï¼ŒåŒæ—¶ä¸æ”¯æŒåˆ‡ç‰‡ä¸Šä¼ ã€‚ åˆ©ç”¨RenderFileæˆ–è€… URL.createObjectURLå°†Fileå¯¹è±¡è½¬æ¢ä¸ºBlobï¼Œå†åˆ©ç”¨canvasè¿›è¡Œå›¾ç‰‡å‹ç¼©ã€å‰ªè£ã€‚æœ€åè½¬æ¢ä¸ºblobæ’å…¥åˆ°FormDataä¸­ä¼ é€’ç»™åç«¯æœåŠ¡ã€‚ å®é™…é¡¹ç›®ä¸­æˆ‘é€‰æ‹©çš„æ˜¯æœ€åä¸€ç§æ¥å®ç°æ–‡ä»¶ä¸Šä¼ ï¼š typeç±»å‹ä¸ºfile çš„inputæ ‡ç­¾å¯ä»¥é€‰æ‹©è®¾å¤‡ä¸Šçš„æ–‡ä»¶è¿›è¡Œä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿›è¡Œä¸Šä¼ æ“ä½œï¼Œå…·ä½“å±æ€§å¯é˜…è¯»MDN-input 12345678&lt;input type=&quot;file&quot; ref=&quot;input&quot; :name=&quot;fileKey&quot; capture=&quot;camera&quot; accept=&quot;image/*&quot; @change=&quot;someHander&quot;/&gt; å‘ç‚¹ä¸€ï¼šé€‰æ‹©ç›¸åŒæ–‡ä»¶ä¸è§¦å‘input çš„onchangeäº‹ä»¶å› ä¸ºä¸¤æ¬¡é€‰æ‹©çš„æ–‡ä»¶ä¸€è‡´ï¼Œinputçš„valueå€¼å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘changeäº‹ä»¶ï¼Œæ‰€ä»¥å¾—åˆ°æ–‡ä»¶åæ¸…ç©ºvalueæ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ 12345function someHander(event) { const file = e.target.files[0]; // some action event.target.value = '';} å‘ç‚¹äºŒï¼šå¯¹å¾—åˆ°Fileå¯¹è±¡è¿›è¡Œå¤„ç†ç›®å‰å¯¹FIleå¯¹è±¡å¤„ç†å¸¸ç”¨çš„APIæœ‰ URL.createObjectURLï¼šå‚æ•°ä¼ é€’fileæˆ–è€…blobå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„URLå¯¹è±¡ æ‰§è¡Œæ–¹å¼ï¼šåŒæ­¥å‡½æ•°ç«‹å³æ‰§è¡Œ å†…å­˜æ¶ˆè€—ï¼šå› ä¸ºURLçš„ç”Ÿå‘½å‘¨æœŸå’Œdocumentç›¸å…³ï¼Œåªæœ‰åœ¨çª—å£å…³é—­ã€æ‰§è¡ŒURL.revokeObjectURLæ—¶é”€æ¯ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ååº”è¯¥ä¸»åŠ¨å»é”€æ¯æ”¹URL å¯¹è±¡ å…¼å®¹æ€§ï¼šIE10åçš„æ‰€æœ‰ç°ä»£æµè§ˆå™¨ FileReader. readAsDataURL: å‚æ•°ä¼ é€’fileæˆ–è€…blobå¯¹è±¡ï¼Œè¿”å›æ‰€å¯¹åº”Base64å†…å®¹ æ‰§è¡Œæ–¹å¼ï¼šFileRenderåˆ©ç”¨è‡ªèº«çš„loadã€errorè¿›è¡Œå¼‚æ­¥æ‰§è¡Œï¼Œéœ€è¦ç»‘å®šå¯¹åº”çš„äº‹ä»¶å¾—åˆ°æ‰§è¡Œçš„ç»“æœã€‚ å†…å­˜æ¶ˆè€—ï¼šå› ä¸ºBase64åŒ…å«çš„éƒ½æ˜¯æ–‡æœ¬å†…å®¹ï¼Œç›¸å¯¹äºblobå æ®æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å­˜å‚¨base64çš„å˜é‡åœ¨ä¸ä½¿ç”¨ä¹‹åä¼šè¢«JavaScriptçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè‡ªåŠ¨å›æ”¶ã€‚ å…¼å®¹æ€§ï¼šIE10åçš„æ‰€æœ‰ç°ä»£æµè§ˆå™¨ æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™é‡Œé€‰æ‹©URL.createObjectURLè¿›è¡ŒFileå¯¹è±¡çš„è¯»å–ã€‚ 12345const blob = URL.createObjectURL(file);let imgEl = new Image();imgEl.src = blob;// some action....URL.revokeObjectURL(blob); // è®°å¾—é‡Šæ”¾URLå¯¹è±¡ å‘ç‚¹ä¸‰ï¼šå›¾ç‰‡æ–¹å‘æ—‹è½¬é—®é¢˜åœ¨IOSè®¾å¤‡æ‹ç…§ä¸­ï¼Œä¼šå‡ºç°ç…§ç‰‡åœ¨canvasç»˜åˆ¶å‡ºç°æ˜¯æ¨ªçš„ï¼Œå’Œæ‰‹æŒæ‹ç…§æ—¶çš„æ–¹å‘å¹¶ä¸ä¸€è‡´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è·å–exifä¸­ä¸€ä¸ªOrientationçš„å‚æ•°ï¼Œå¾—åˆ°ç…§ç‰‡æ—‹è½¬æ–¹å‘ã€‚è¯¦è§å¯ä»¥é˜…è¯»ä¸ƒç‰›äº‘-å…³äºå›¾ç‰‡ EXIF ä¿¡æ¯ä¸­æ—‹è½¬å‚æ•° Orientation çš„ç†è§£ å¯ä»¥åˆ©ç”¨å¼€æºçš„exif-jsæ’ä»¶å¾—åˆ°ç…§ç‰‡çš„exifä¿¡æ¯ï¼Œä»è€Œåœ¨canvaç»˜åˆ¶æ­£ç¡®å±•ç¤ºçš„å›¾ç‰‡ã€‚ å‘ç‚¹å››ï¼šcanvasæœ€å¤§å°ºå¯¸æ¸²æŸ“åˆ©ç”¨canvasç»˜åˆ¶å›¾ç‰‡ï¼Œåº”è¯¥æ§åˆ¶ä¸‹æ§åˆ¶ç»˜åˆ¶çš„å°ºå¯¸å¤§å°ï¼Œå› ä¸ºç»˜åˆ¶ä¹Ÿæ˜¯å ç”¨å†…å­˜çš„å˜›ã€‚å¤ªå¤§çš„å°ºå¯¸çš„å›¾ç‰‡ç»˜åˆ¶æ•ˆç‡ä¸é«˜ä¸è¯´ï¼Œä½ç«¯çš„æ‰‹æœºå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨ç›´æ¥å¥”æºƒã€å¡é¡¿ç­‰é—®é¢˜ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950resizeImg(img: HTMLImageElement, orientation) { const { width, height } = img; let ret = { width, height }; if (&quot;68&quot;.indexOf(orientation) &gt; -1) { // 90ã€270åº¦å®½é«˜äº’æ¢ ret = { width: height, height: width }; } // å¦‚æœåŸå›¾å°äºè®¾å®šï¼Œé‡‡ç”¨åŸå›¾ if ( ret.width &lt; this.options.maxWidth || ret.height &lt; this.options.maxHeight ) { return ret; } const scale = ret.width / ret.height; // åŸºäºå®½é«˜çš„æ¯”ä¾‹è¿›è¡Œscale if (width &amp;&amp; height) { if (scale &gt;= width / height) { if (ret.width &gt; width) { ret.width = width; ret.height = Math.ceil(width / scale); } } else { if (ret.height &gt; height) { ret.height = height; ret.width = Math.ceil(height * scale); } } } else if (width) { if (width &lt; ret.width) { ret.width = width; ret.height = Math.ceil(width / scale); } } else if (height) { if (height &lt; ret.height) { ret.width = Math.ceil(height * scale); ret.height = height; } } // è¶…è¿‡è¿™ä¸ªå€¼base64æ— æ³•ç”Ÿæˆï¼Œåœ¨IOSä¸Š while (ret.width &gt;= 3264 || ret.height &gt;= 2448) { ret.width *= 0.8; ret.height *= 0.8; } return ret; } å‘ç‚¹äº”ï¼šæŸäº›webkitç‰ˆæœ¬å’Œå¾®ä¿¡X5å†…æ ¸ toDataURLè§£æé—®é¢˜åœ¨ä¸Šè¿°ç¯å¢ƒä¸­ï¼Œç…§ç‰‡å‹ç¼©ä¼šå¯¼è‡´å›¾ç‰‡å˜é»‘ã€é”™ä¹±ã€é‡å¤æ’åˆ—é—®é¢˜ï¼Œå¦‚å›¾ï¼š Ps: åŸå› æ˜¯å› ä¸ºåœ¨ä½¿ç”¨toDataURL(jpeg, 0.5)å‹ç¼©æ—¶ï¼Œå†…æ ¸ä½¿ç”¨äº†pngè§£æç®—æ³•ï¼Œåœ¨è¿™äº›æœºå‹ä¸‹éœ€è¦å¼•ç”¨jpegè§£æå‡½æ•°å»è‡ªè¡Œè§£æã€‚ å‘ç‚¹å…­ï¼šFormdataä¸­ appendblobä¸ºç©ºè¿™ä¸ªé—®é¢˜è¿™é‡Œå°±ä¸å±•å¼€è¯´æ˜äº†ï¼Œå¯ä»¥å‚è€ƒ[Blob in FormData is nulläº†è§£è§£å†³æ–¹æ¡ˆã€‚ æ€»ç»“ä»¥ä¸Šä¸ºé‡åˆ°å‡ ä¸ªä¸»è¦çš„é—®é¢˜ï¼Œå¯èƒ½è¿˜æœ‰æ²¡æœ‰è§¦åŠåˆ°çš„å…¶ä»–é—®é¢˜ï¼Œå°†ä¼šå†é‡åˆ°åç»§ç»­ç¼–è¾‘ã€‚","link":"/2019/01/06/H5%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"},{"title":"æŠ€å˜‰Z370 HD3P + i7-8700K + Vega56 é»‘è‹¹æœOpenCore EFIåˆ†äº«","text":"ä¹‹å‰æŠ˜è…¾çš„Catalinaæ­£å¸¸è¿è¡Œäº†å¤§æ¦‚å¿«ä¸€å¹´å·¦å³æ—¶é—´äº†ï¼Œä½œä¸ºæ—¥å¸¸ç”Ÿäº§åŠ›æœºå™¨ä½¿ç”¨æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†éšç€æœ€è¿‘BigSuræ­£å¼ç‰ˆçš„æ¨å‡ºï¼Œåˆå°è¯•è·Ÿè¿›å‡çº§ä¸‹æˆ‘çš„é»‘è‹¹æœï¼Œä½¿ç”¨äº†ä¸€ä¸ªç¤¼æ‹œï¼Œæš‚æ—¶æ²¡å‘ç°é—®é¢˜ï¼Œå€Ÿæ­¤æŠŠæˆ‘ç”¨çš„EFIåšä¸ªåˆ†äº«å§ã€‚ ä½¿ç”¨ç‰ˆæœ¬ macOS 11.0.1 ç¡¬ä»¶é…ç½® è§„æ ¼ è¯¦æƒ… ä¸»æ¿ æŠ€å˜‰ Z370 HD3P CPU Intel Core i7-8700K æ ¸æ˜¾ Intel UHD Graphics 630 ç‹¬æ˜¾ RX VEGA56 8G HBM2 è¶…ç™½é‡‘ OC å†…å­˜å¡ æµ·ç›—èˆ¹å¤ä»‡è€… DDR4 3200 8G*2 SSD1 è‹±ç¿è¾¾ BX500 480G =&gt; Windows + EFI SSD2 è¥¿éƒ¨æ•°æ® Blackç³»ç»Ÿ 250GB =&gt; MacOS HDD å¸Œæ· é…·é±¼ç³»åˆ— 2TB =&gt; Storage + Time Machine æ¿è½½ç½‘å¡ Realtek ALC1220 æ¿è½½ç½‘å¡ Intel I219V2 PCI Express Gigabit Ethernet æ— çº¿ç½‘å¡&amp;è“ç‰™ æ·˜å®å…é©±BCM943602CS å¿…å¤‡è½¯ä»¶ é•œåƒ macOS Big Sur 11.0.1 20B50 Installer å·¥å…· ä¼˜ç›˜é•œåƒå†™å…¥å·¥å…·ï¼šEtcher OpenCoreé…ç½®ç¼–è¾‘å™¨ï¼šOpenCore Configurator Changelog version 2.18.0.2 å®ç”¨å·¥å…·ï¼šHackintool Releases List è°ƒè§£æ˜¾ç¤ºå™¨HIDPIï¼šresxtreme è‡ªç”¨OpenCoreé…ç½® æ³¨æ„ï¼šè¯·è‡ªè¡Œé€šè¿‡OpenCore Configuratorç”Ÿæˆåºåˆ—å· é“¾æ¥: https://pan.baidu.com/s/1Qrq_GnG3mN2QRecT0ZZTEg å¯†ç : 7u3j BIOSè®¾ç½® BIOSç‰ˆæœ¬å‡çº§åˆ°äº†F14ï¼Œéœ€è¦è§£é”CFG LOCKï¼Œè¯¦è§ğŸ”— Save &amp; Exit â†’ Load Optimized Defaults M.I.T. â†’ Advanced Memory Settings Extreme Memory Profile(X.M.P.) : Profile 1 BIOS â†’ Fast Boot : Disabled BIOS â†’ CMS Support: Disabled BIOS â†’ LAN PXE Boot Option ROM : Disabled Peripherals â†’ Super IO Configuration â†’ Serial Port : Disabled Peripherals â†’ USB Configuration â†’ XHCI Hand-off : Enabled Chipset â†’ Vt-d : Disabled æˆªå›¾ é‡åˆ°çš„é—®é¢˜ è®¿è¾¾ç¡¬ç›˜å›¾æ ‡æ˜¾ç¤ºå¼‚å¸¸ï¼šå‘ç°æ˜¯è®¿è¾¾æ‹“å±•å…¼å®¹é—®é¢˜ï¼Œåå¥½è®¾ç½®-&gt; æ‹“å±• -&gt; â€œè®¿è¾¾â€æ‹“å±• å–æ¶ˆå‹¾é€‰å¯ç–‘çš„æ‹“å±•ï¼Œé‡å¯è®¿è¾¾å°±å¥½ å”¤é†’åéš”ç©ºæŠ•é€è‡ªåŠ¨å…³é—­ï¼šå¹³æ—¶ä¸å¸¸ç”¨éš”ç©ºæŠ•é€ï¼Œæš‚æ—¶å…ˆè¿™æ ·ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨ å‚è€ƒé“¾æ¥ Gigabyte Z370 HD3P - i7 8700K - RX580 8GB - Catalina 10.15.5 - OpenCore 0.5.9 æŠ€å˜‰Z370-HD3På’Œi7-8700çš„OC0.5.6é…ç½®ï¼Œåª²ç¾ç™½è‹¹æœ","link":"/2020/12/12/%E6%8A%80%E5%98%89Z370%20HD3P%20+%20i7-8700K%20+%20Vega56%20%E9%BB%91%E8%8B%B9%E6%9E%9COpenCore%20EFI%E5%88%86%E4%BA%AB/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"é»‘è‹¹æœ","slug":"é»‘è‹¹æœ","link":"/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/"}],"categories":[{"name":"ç¬”è®°æœ¬","slug":"ç¬”è®°æœ¬","link":"/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/"},{"name":"é»‘è‹¹æœ","slug":"é»‘è‹¹æœ","link":"/categories/%E9%BB%91%E8%8B%B9%E6%9E%9C/"}]}