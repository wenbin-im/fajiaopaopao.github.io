{"pages":[{"title":"","text":"404 html{font-size:62.5%;box-sizing:border-box}*,::after,::before{box-sizing:inherit}body{font-family:sf pro text,sf pro icons,helvetica neue,helvetica,arial,sans-serif;font-size:1.6rem;line-height:1.65;word-break:break-word;font-kerning:auto;font-variant:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;hyphens:auto;height:100vh;max-height:100vh;margin:0}::selection{background:#79ffe1}::-moz-selection{background:#79ffe1}a{cursor:pointer;color:#0070f3;text-decoration:none;transition:all .2s ease;border-bottom:1px solid #0000}a:hover{border-bottom:1px solid #0070f3}ul{padding:0;margin-left:1.5em;list-style-type:none}li{margin-bottom:10px}ul li:before{content:'\\02013'}li:before{display:inline-block;color:#ccc;position:absolute;margin-left:-18px;transition:color .2s ease}code{font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;font-size:.92em}code:after,code:before{content:'`'}.container{display:flex;justify-content:center;flex-direction:column;min-height:100vh}main{max-width:80rem;padding:4rem 6rem;margin:auto}ul{margin-bottom:32px}.error-title{font-size:2rem;border-left:2px solid #ff0080;padding-left:22px;line-height:1.5;margin-bottom:24px;font-weight:500}main p{color:#333}.devinfo-container{ width: 100%; border:1px solid #ddd;border-radius:4px;padding:2rem;display:flex;flex-direction:column;margin-bottom:32px}.error-code{margin:0;font-size:1.6rem;color:#000;margin-bottom:1.6rem}.devinfo-line{color:#333}.devinfo-line code,code,li{color:#000}.devinfo-line:not(:last-child){margin-bottom:8px}.docs-link,.contact-link{font-weight:500}header,footer,footer a{display:flex;justify-content:center;align-items:center}header,footer{min-height:100px;height:100px}header{border-bottom:1px solid #eaeaea}header h1{font-size:1.8rem;margin:0;font-weight:500}header p{font-size:1.3rem;margin:0;font-weight:500}.header-item{display:flex;padding:0 2rem;margin:2rem 0;text-decoration:line-through;color:#999}.header-item.active{color:#ff0080;text-decoration:none}.header-item.first{border-right:1px solid #eaeaea}.header-item-content{display:flex;flex-direction:column}.header-item-icon{margin-right:1rem;margin-top:.6rem}footer{border-top:1px solid #eaeaea}footer a{color:#000}footer a:hover{border-bottom-color:#0000}footer svg{margin-left:.8rem}.note{padding:8pt 16pt;border-radius:5px;border:1px solid #0070f3;font-size:14px;line-height:1.8;color:#0070f3}.note__type{text-transform:uppercase;font-weight:500}@media(max-width:500px){.devinfo-container .devinfo-line code{margin-top:.4rem}.devinfo-container .devinfo-line:not(:last-child){margin-bottom:1.6rem}.devinfo-container{margin-bottom:0}header{flex-direction:column;height:auto;min-height:auto;align-items:flex-start}.header-item.first{border-right:none;margin-bottom:0}main{padding:1rem 2rem}body{font-size:1.4rem;line-height:1.55}footer{display:none}.note{margin-top:16px}} 404: NOT_FOUND Code: NOT_FOUND Back Home: www.ifajiao.com","link":"/404.html"},{"title":"","text":"å…³äºæˆ‘å‰ç«¯ï¼Œç°å±…åŒ—äº¬ åŠªåŠ›æé«˜è‡ªå·±çš„å§¿åŠ¿æ°´å¹³ä¸­~","link":"/about/index.html"}],"posts":[{"title":"H5å›¾ç‰‡ä¸Šä¼ è¸©å‘è®°å½•","text":"æœ€è¿‘å†™çš„ä¸€ä¸ªé¡¹ç›®ä¸­å›¾ç‰‡ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½ï¼Œè¿è¥åŒå­¦åé¦ˆç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å‡ºç°äº†ç…§ç‰‡å†…å®¹å˜é»‘é”™ä¹±ã€ä¸Šä¼ ç…§ç‰‡å¤§å°ä¸º0å­—èŠ‚ç­‰å¥‡æ€ªé—®é¢˜ï¼Œä¸‹é¢å°±è®°å½•ä¸‹å¤„ç†é—®é¢˜çš„è¿‡ç¨‹ã€‚ å‰è¨€æˆ‘ä»¬å¸¸ç”¨H5ä¸Šä¼ å›¾ç‰‡æ–¹å¼ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š åˆ©ç”¨ input å’Œ form è¡¨å•è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯æ— æ³•å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ã€æ—‹è½¬ç­‰ä¼˜åŒ–å¤„ç†ã€‚ åˆ©ç”¨RenderFileçš„readAsDataURLè½¬æˆbase64è¿›è¡Œä¸Šä¼ ï¼Œä½†æ˜¯base64ç¼–ç é€šå¸¸æ¯”æ‰€å¯¹åº”çš„å›¾ç‰‡äºŒè¿›åˆ¶æ–‡ä»¶ä½“ç§¯è¦æ›´å¤§ï¼ŒåŒæ—¶ä¸æ”¯æŒåˆ‡ç‰‡ä¸Šä¼ ã€‚ åˆ©ç”¨RenderFileæˆ–è€… URL.createObjectURLå°†Fileå¯¹è±¡è½¬æ¢ä¸ºBlobï¼Œå†åˆ©ç”¨canvasè¿›è¡Œå›¾ç‰‡å‹ç¼©ã€å‰ªè£ã€‚æœ€åè½¬æ¢ä¸ºblobæ’å…¥åˆ°FormDataä¸­ä¼ é€’ç»™åç«¯æœåŠ¡ã€‚ å®é™…é¡¹ç›®ä¸­æˆ‘é€‰æ‹©çš„æ˜¯æœ€åä¸€ç§æ¥å®ç°æ–‡ä»¶ä¸Šä¼ ï¼š typeç±»å‹ä¸ºfile çš„inputæ ‡ç­¾å¯ä»¥é€‰æ‹©è®¾å¤‡ä¸Šçš„æ–‡ä»¶è¿›è¡Œä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿›è¡Œä¸Šä¼ æ“ä½œï¼Œå…·ä½“å±æ€§å¯é˜…è¯»MDN-input 12345678&lt;input type=&quot;file&quot; ref=&quot;input&quot; :name=&quot;fileKey&quot; capture=&quot;camera&quot; accept=&quot;image/*&quot; @change=&quot;someHander&quot;/&gt; å‘ç‚¹ä¸€ï¼šé€‰æ‹©ç›¸åŒæ–‡ä»¶ä¸è§¦å‘input çš„onchangeäº‹ä»¶å› ä¸ºä¸¤æ¬¡é€‰æ‹©çš„æ–‡ä»¶ä¸€è‡´ï¼Œinputçš„valueå€¼å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘changeäº‹ä»¶ï¼Œæ‰€ä»¥å¾—åˆ°æ–‡ä»¶åæ¸…ç©ºvalueæ¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ 12345function someHander(event) { const file = e.target.files[0]; // some action event.target.value = '';} å‘ç‚¹äºŒï¼šå¯¹å¾—åˆ°Fileå¯¹è±¡è¿›è¡Œå¤„ç†ç›®å‰å¯¹FIleå¯¹è±¡å¤„ç†å¸¸ç”¨çš„APIæœ‰ URL.createObjectURLï¼šå‚æ•°ä¼ é€’fileæˆ–è€…blobå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„URLå¯¹è±¡ æ‰§è¡Œæ–¹å¼ï¼šåŒæ­¥å‡½æ•°ç«‹å³æ‰§è¡Œ å†…å­˜æ¶ˆè€—ï¼šå› ä¸ºURLçš„ç”Ÿå‘½å‘¨æœŸå’Œdocumentç›¸å…³ï¼Œåªæœ‰åœ¨çª—å£å…³é—­ã€æ‰§è¡ŒURL.revokeObjectURLæ—¶é”€æ¯ï¼Œæ‰€ä»¥ä¸é€‚ç”¨ååº”è¯¥ä¸»åŠ¨å»é”€æ¯æ”¹URL å¯¹è±¡ å…¼å®¹æ€§ï¼šIE10åçš„æ‰€æœ‰ç°ä»£æµè§ˆå™¨ FileReader. readAsDataURL: å‚æ•°ä¼ é€’fileæˆ–è€…blobå¯¹è±¡ï¼Œè¿”å›æ‰€å¯¹åº”Base64å†…å®¹ æ‰§è¡Œæ–¹å¼ï¼šFileRenderåˆ©ç”¨è‡ªèº«çš„loadã€errorè¿›è¡Œå¼‚æ­¥æ‰§è¡Œï¼Œéœ€è¦ç»‘å®šå¯¹åº”çš„äº‹ä»¶å¾—åˆ°æ‰§è¡Œçš„ç»“æœã€‚ å†…å­˜æ¶ˆè€—ï¼šå› ä¸ºBase64åŒ…å«çš„éƒ½æ˜¯æ–‡æœ¬å†…å®¹ï¼Œç›¸å¯¹äºblobå æ®æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯å­˜å‚¨base64çš„å˜é‡åœ¨ä¸ä½¿ç”¨ä¹‹åä¼šè¢«JavaScriptçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œè‡ªåŠ¨å›æ”¶ã€‚ å…¼å®¹æ€§ï¼šIE10åçš„æ‰€æœ‰ç°ä»£æµè§ˆå™¨ æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™é‡Œé€‰æ‹©URL.createObjectURLè¿›è¡ŒFileå¯¹è±¡çš„è¯»å–ã€‚ 12345const blob = URL.createObjectURL(file);let imgEl = new Image();imgEl.src = blob;// some action....URL.revokeObjectURL(blob); // è®°å¾—é‡Šæ”¾URLå¯¹è±¡ å‘ç‚¹ä¸‰ï¼šå›¾ç‰‡æ–¹å‘æ—‹è½¬é—®é¢˜åœ¨IOSè®¾å¤‡æ‹ç…§ä¸­ï¼Œä¼šå‡ºç°ç…§ç‰‡åœ¨canvasç»˜åˆ¶å‡ºç°æ˜¯æ¨ªçš„ï¼Œå’Œæ‰‹æŒæ‹ç…§æ—¶çš„æ–¹å‘å¹¶ä¸ä¸€è‡´ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è·å–exifä¸­ä¸€ä¸ªOrientationçš„å‚æ•°ï¼Œå¾—åˆ°ç…§ç‰‡æ—‹è½¬æ–¹å‘ã€‚è¯¦è§å¯ä»¥é˜…è¯»ä¸ƒç‰›äº‘-å…³äºå›¾ç‰‡ EXIF ä¿¡æ¯ä¸­æ—‹è½¬å‚æ•° Orientation çš„ç†è§£ å¯ä»¥åˆ©ç”¨å¼€æºçš„exif-jsæ’ä»¶å¾—åˆ°ç…§ç‰‡çš„exifä¿¡æ¯ï¼Œä»è€Œåœ¨canvaç»˜åˆ¶æ­£ç¡®å±•ç¤ºçš„å›¾ç‰‡ã€‚ å‘ç‚¹å››ï¼šcanvasæœ€å¤§å°ºå¯¸æ¸²æŸ“åˆ©ç”¨canvasç»˜åˆ¶å›¾ç‰‡ï¼Œåº”è¯¥æ§åˆ¶ä¸‹æ§åˆ¶ç»˜åˆ¶çš„å°ºå¯¸å¤§å°ï¼Œå› ä¸ºç»˜åˆ¶ä¹Ÿæ˜¯å ç”¨å†…å­˜çš„å˜›ã€‚å¤ªå¤§çš„å°ºå¯¸çš„å›¾ç‰‡ç»˜åˆ¶æ•ˆç‡ä¸é«˜ä¸è¯´ï¼Œä½ç«¯çš„æ‰‹æœºå¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨ç›´æ¥å¥”æºƒã€å¡é¡¿ç­‰é—®é¢˜ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950resizeImg(img: HTMLImageElement, orientation) { const { width, height } = img; let ret = { width, height }; if (&quot;68&quot;.indexOf(orientation) &gt; -1) { // 90ã€270åº¦å®½é«˜äº’æ¢ ret = { width: height, height: width }; } // å¦‚æœåŸå›¾å°äºè®¾å®šï¼Œé‡‡ç”¨åŸå›¾ if ( ret.width &lt; this.options.maxWidth || ret.height &lt; this.options.maxHeight ) { return ret; } const scale = ret.width / ret.height; // åŸºäºå®½é«˜çš„æ¯”ä¾‹è¿›è¡Œscale if (width &amp;&amp; height) { if (scale &gt;= width / height) { if (ret.width &gt; width) { ret.width = width; ret.height = Math.ceil(width / scale); } } else { if (ret.height &gt; height) { ret.height = height; ret.width = Math.ceil(height * scale); } } } else if (width) { if (width &lt; ret.width) { ret.width = width; ret.height = Math.ceil(width / scale); } } else if (height) { if (height &lt; ret.height) { ret.width = Math.ceil(height * scale); ret.height = height; } } // è¶…è¿‡è¿™ä¸ªå€¼base64æ— æ³•ç”Ÿæˆï¼Œåœ¨IOSä¸Š while (ret.width &gt;= 3264 || ret.height &gt;= 2448) { ret.width *= 0.8; ret.height *= 0.8; } return ret; } å‘ç‚¹äº”ï¼šæŸäº›webkitç‰ˆæœ¬å’Œå¾®ä¿¡X5å†…æ ¸ toDataURLè§£æé—®é¢˜åœ¨ä¸Šè¿°ç¯å¢ƒä¸­ï¼Œç…§ç‰‡å‹ç¼©ä¼šå¯¼è‡´å›¾ç‰‡å˜é»‘ã€é”™ä¹±ã€é‡å¤æ’åˆ—é—®é¢˜ï¼Œå¦‚å›¾ï¼š Ps: åŸå› æ˜¯å› ä¸ºåœ¨ä½¿ç”¨toDataURL(jpeg, 0.5)å‹ç¼©æ—¶ï¼Œå†…æ ¸ä½¿ç”¨äº†pngè§£æç®—æ³•ï¼Œåœ¨è¿™äº›æœºå‹ä¸‹éœ€è¦å¼•ç”¨jpegè§£æå‡½æ•°å»è‡ªè¡Œè§£æã€‚ å‘ç‚¹å…­ï¼šFormdataä¸­ appendblobä¸ºç©ºè¿™ä¸ªé—®é¢˜è¿™é‡Œå°±ä¸å±•å¼€è¯´æ˜äº†ï¼Œå¯ä»¥å‚è€ƒ[Blob in FormData is nulläº†è§£è§£å†³æ–¹æ¡ˆã€‚ æ€»ç»“ä»¥ä¸Šä¸ºé‡åˆ°å‡ ä¸ªä¸»è¦çš„é—®é¢˜ï¼Œå¯èƒ½è¿˜æœ‰æ²¡æœ‰è§¦åŠåˆ°çš„å…¶ä»–é—®é¢˜ï¼Œå°†ä¼šå†é‡åˆ°åç»§ç»­ç¼–è¾‘ã€‚","link":"/frontend-upload-problem-note/"},{"title":"æŠ€å˜‰Z370 HD3P + i7-8700K + Vega56 é»‘è‹¹æœOpenCore EFIåˆ†äº«","text":"ä¹‹å‰æŠ˜è…¾çš„Catalinaæ­£å¸¸è¿è¡Œäº†å¤§æ¦‚å¿«ä¸€å¹´å·¦å³æ—¶é—´äº†ï¼Œä½œä¸ºæ—¥å¸¸ç”Ÿäº§åŠ›æœºå™¨ä½¿ç”¨æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†éšç€æœ€è¿‘BigSuræ­£å¼ç‰ˆçš„æ¨å‡ºï¼Œåˆå°è¯•è·Ÿè¿›å‡çº§ä¸‹æˆ‘çš„é»‘è‹¹æœï¼Œä½¿ç”¨äº†ä¸€ä¸ªç¤¼æ‹œï¼Œæš‚æ—¶æ²¡å‘ç°é—®é¢˜ï¼Œå€Ÿæ­¤æŠŠæˆ‘ç”¨çš„EFIåšä¸ªåˆ†äº«å§ã€‚ ä½¿ç”¨ç‰ˆæœ¬ macOS 11.0.1 ç¡¬ä»¶é…ç½® è§„æ ¼ è¯¦æƒ… ä¸»æ¿ æŠ€å˜‰ Z370 HD3P CPU Intel Core i7-8700K æ ¸æ˜¾ Intel UHD Graphics 630 ç‹¬æ˜¾ RX VEGA56 8G HBM2 è¶…ç™½é‡‘ OC å†…å­˜å¡ æµ·ç›—èˆ¹å¤ä»‡è€… DDR4 3200 8G*2 SSD1 è‹±ç¿è¾¾ BX500 480G =&gt; Windows + EFI SSD2 è¥¿éƒ¨æ•°æ® Blackç³»ç»Ÿ 250GB =&gt; MacOS HDD å¸Œæ· é…·é±¼ç³»åˆ— 2TB =&gt; Storage + Time Machine æ¿è½½ç½‘å¡ Realtek ALC1220 æ¿è½½ç½‘å¡ Intel I219V2 PCI Express Gigabit Ethernet æ— çº¿ç½‘å¡&amp;è“ç‰™ æ·˜å®å…é©±BCM943602CS å¿…å¤‡è½¯ä»¶ é•œåƒ macOS Big Sur 11.0.1 20B50 Installer å·¥å…· ä¼˜ç›˜é•œåƒå†™å…¥å·¥å…·ï¼šEtcher OpenCoreé…ç½®ç¼–è¾‘å™¨ï¼šOpenCore Configurator Changelog version 2.18.0.2 å®ç”¨å·¥å…·ï¼šHackintool Releases List è°ƒè§£æ˜¾ç¤ºå™¨HIDPIï¼šresxtreme è‡ªç”¨OpenCoreé…ç½® æ³¨æ„ï¼šè¯·è‡ªè¡Œé€šè¿‡OpenCore Configuratorç”Ÿæˆåºåˆ—å· é“¾æ¥: https://pan.baidu.com/s/1Qrq_GnG3mN2QRecT0ZZTEg å¯†ç : 7u3j BIOSè®¾ç½® BIOSç‰ˆæœ¬å‡çº§åˆ°äº†F14ï¼Œéœ€è¦è§£é”CFG LOCKï¼Œè¯¦è§ğŸ”— Save &amp; Exit â†’ Load Optimized Defaults M.I.T. â†’ Advanced Memory Settings Extreme Memory Profile(X.M.P.) : Profile 1 BIOS â†’ Fast Boot : Disabled BIOS â†’ CMS Support: Disabled BIOS â†’ LAN PXE Boot Option ROM : Disabled Peripherals â†’ Super IO Configuration â†’ Serial Port : Disabled Peripherals â†’ USB Configuration â†’ XHCI Hand-off : Enabled Chipset â†’ Vt-d : Disabled æˆªå›¾ é‡åˆ°çš„é—®é¢˜ è®¿è¾¾ç¡¬ç›˜å›¾æ ‡æ˜¾ç¤ºå¼‚å¸¸ï¼šå‘ç°æ˜¯è®¿è¾¾æ‹“å±•å…¼å®¹é—®é¢˜ï¼Œåå¥½è®¾ç½®-&gt; æ‹“å±• -&gt; â€œè®¿è¾¾â€æ‹“å±• å–æ¶ˆå‹¾é€‰å¯ç–‘çš„æ‹“å±•ï¼Œé‡å¯è®¿è¾¾å°±å¥½ å”¤é†’åéš”ç©ºæŠ•é€è‡ªåŠ¨å…³é—­ï¼šå¹³æ—¶ä¸å¸¸ç”¨éš”ç©ºæŠ•é€ï¼Œæš‚æ—¶å…ˆè¿™æ ·ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨ å‚è€ƒé“¾æ¥ Gigabyte Z370 HD3P - i7 8700K - RX580 8GB - Catalina 10.15.5 - OpenCore 0.5.9 æŠ€å˜‰Z370-HD3På’Œi7-8700çš„OC0.5.6é…ç½®ï¼Œåª²ç¾ç™½è‹¹æœ","link":"/gigabyte-z370-hd3p-opencore-efi-share/"},{"title":"n3540è½¯è·¯ç”±å®‰è£…pve+ikuai+openwrt(lede)åŒè½¯è·¯ç”±ç³»ç»Ÿè®°å½•","text":"çˆ±å¿«+OpenWrtæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„åŒè½¯è·¯ç”±æ–¹æ¡ˆã€‚æˆ‘å…·ä½“æ–¹æ¡ˆæ˜¯ï¼š1.çˆ±å¿«ä½œä¸ºæ‹¨å·å’Œæ§æµã€Naså¤–ç½‘æ˜ å°„ï¼›2.Ledeæ’ä»¶å¸‚åœºä¸°å¯Œä½œä¸ºæ—è·¯ç”±ï¼Œæ¥è§£å†³404ç½‘ç«™è®¿é—®ï¼Œå¹¿å‘Šå±è”½ï¼›3.ç½‘ä»¶è·¯ç”±å™¨ä½œä¸ºä¸­ç»§APæ¥ç®¡æœ‰çº¿è®¾å¤‡ã€WiFiè®¾å¤‡çš„ç½‘ç»œæ¥å…¥ã€‚ ç¡¬ä»¶è®¾å¤‡ æŸå®N3540è½¯è·¯ç”±+4Gå†…å­˜æ¡+64G SSD NETGEAR 6800 ç¾¤è¾‰ DS220+ è½¯ä»¶å·¥å…· PVEé•œåƒï¼šhttps://pve.proxmox.com/wiki/Main_Page iKuaiå›ºä»¶ï¼šhttps://www.ikuai8.com/component/download HomeLedeå›ºä»¶ï¼šhttps://github.com/xiaoqingfengATGH/HomeLede/wiki é€‰æ‹©ä½¿ç”¨HomeLedeï¼Œè€Œä¸æ˜¯è‡ªè¡Œç¼–è¯‘çš„åŸå› æ˜¯ï¼šHomeLedeå†…ç½®å†…ç½®äº†ç§‘å­¦å·¥å…·ã€AdGuardã€DNSç­‰åˆšéœ€è§£å†³æ–¹æ¡ˆï¼Œå°±æ‡’å¾—è‡ªå·±å»æŠ˜è…¾äº†ã€‚ åŠŸèƒ½éœ€æ±‚ ç§‘å­¦è®¿é—®ï¼šç”µè„‘ã€æ‰‹æœºç­‰è®¾å¤‡èƒ½å¤Ÿæ— é™è®¿é—®å¤–ç½‘ å¹¿å‘Šæ‹¦æˆªï¼šå¤šè®¾å¤‡ä¸Šå¯¹å»é™¤å¹¿å‘Šï¼Œç¦æ­¢ç”¨æˆ·è¿½è¸ªï¼Œé˜²æ­¢DNSæ±¡æŸ“ NASå¤–ç½‘æ˜ å°„ï¼šåˆ©ç”¨DDNSå°†NASçš„åº”ç”¨ç«¯å£æ˜ å°„åˆ°å¤–ç½‘ï¼Œå¯ä»¥è¿œç¨‹è®¿é—®å’Œç®¡æ§ ç½‘ç»œå…±äº«ï¼šå†…ç½‘è®¾å¤‡ä¹‹é—´èƒ½å¤Ÿç½‘ç»œå…±äº«ï¼Œå¤‡ä»½Mac Time Machineåˆ°NASä¸­ ç½‘ç»œæ‹“æ‰‘å…·ä½“å¦‚ä½•åœ¨è½¯è·¯ç”±ä¸Šå®‰è£…PVEä»¥åŠiKuaiã€Ledeè¿™é‡Œå°±ä¸è¯¦ç»†ç»™å‡ºäº†ï¼Œç½‘ä¸Šç›¸å…³çš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œè‡ªå·±æ ¹æ®è‡ªå·±éœ€æ±‚æœç´¢ç›¸å…³æ•™ç¨‹å³å¯ï¼Œä¸‹é¢æ˜¯æ ¹æ®æˆ‘è®¾å¤‡å’Œéœ€æ±‚æƒ…å†µç”»å‡ºçš„ç½‘ç»œæ‹“è¡¥å›¾ï¼š","link":"/pve-ikuai-lede-install/"},{"title":"ã€è¯»ä¹¦ç¬”è®°ã€‘The Grammar of Graphics - 1. Introduction","text":"ã€ŠThe Grammar of Graphicsã€‹æ˜¯ä½œè€…Leland Wilkinsonåœ¨å¼€å‘GPLè¿‡ç¨‹ä¸­ï¼Œæ‰€æ²‰æ·€çš„ä¸€æœ¬å…³äºå›¾å½¢è¯­æ³•å­¦çš„è‘—ä½œã€‚å·ç§°æ˜¯å¾ˆå¤šæµè¡Œå›¾è¡¨åº“ï¼ˆä¾‹å¦‚ï¼šG2ã€Vegaã€ggplot2ï¼‰çš„ç†è®ºåŸºç¡€ï¼Œå¸Œæœ›è‡ªå·±èƒ½åšæŒè¯»å®Œï¼Œä¹Ÿèƒ½åœ¨å…¶ä¸­æœ‰æ‰€æ”¶è·ã€‚ â€œè¯­æ³•â€ä¸€è¯çš„è‹±æ–‡â€œGrammarâ€æ¥è‡ªå¤å¸Œè…Šè¯­Î³ÏÎ±Î¼Î¼Î±Ï„Î¹Îºá½´ Ï„Î­Ï‡Î½Î·ï¼ˆgrammatikÄ“ technÄ“ï¼‰ï¼Œæ„æ€æ˜¯â€œå­—æ¯çš„è‰ºæœ¯â€ã€‚è¯­æ³•ç»™å‡ºè¯­è¨€çš„è§„åˆ™ï¼Œæ˜¯ä¸€å¥—â€œä½“ç³»å†…å…ƒç´ çš„ç»„åˆè§„åˆ™â€ï¼Œç”¨äºç”Ÿæˆè¯­è¨€ä¸­çš„åˆæ³•é™ˆè¿°ã€‚ åœ¨å›¾è¡¨åˆ†ç±»ç†è®ºä¸­ï¼Œæˆ‘ä»¬çŸ¥é“æœ‰æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€é¥¼å›¾ã€æ•£ç‚¹å›¾ç­‰è¿™äº›å›¾è¡¨ï¼Œä½†æ˜¯ç°å®ç”Ÿæ´»ä¸­æ˜¯ä¸æ˜¯åªæœ‰è¿™äº›å›¾è¡¨å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œéšç€è®¡ç®—æœºçš„æ™®åŠå’Œå›¾å½¢å­¦çš„å‘å±•ï¼Œç»Ÿè®¡éœ€æ±‚å¾—åˆ°è¿›ä¸€æ­¥çš„ä¸°å¯Œå’Œå‘å±•ã€‚æ–°çš„å¯è§†åŒ–å›¾è¡¨å±‚å‡ºä¸ç©·çš„å‡ºç°ï¼Œå¦‚ï¼šé›·è¾¾å›¾ã€æ¡‘å‰å›¾ã€Kçº¿å›¾ç­‰ï¼Œå¦‚æœä»¥ä¼ ç»Ÿçš„åˆ†ç±»æ–¹å¼å»æšä¸¾å®ç°å„ç§å›¾è¡¨ï¼Œå°†ä¼šæ˜¯ä¸ªå·¨å¤§ä¸”éš¾ä»¥ç»´æŠ¤å’Œå¤ç”¨çš„å·¥ä½œã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•ä»¥æ¯”è¾ƒå°çš„ä»£ä»·å°½å¯èƒ½å¤šçš„ç©·ä¸¾å›¾å½¢å‘¢ï¼Ÿ é€šè¿‡åˆ†æç°è±¡çœ‹åˆ°æœ¬è´¨ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜æ€»çš„æ¥è¯´å°±æ˜¯ï¼šå¦‚ä½•å¯è§†åŒ–æ¥è¡¨è¾¾å›¾è¡¨çš„é—®é¢˜ï¼Œä½œè€…é€šè¿‡å¯¹å„ç§å›¾è¡¨è¿›è¡Œç ”ç©¶å’Œåˆ†æåï¼Œä¸€å¥—è¯­æ³•æè¿°å›¾å½¢çš„ç†è®ºè¯ç”Ÿäº†ï¼Œç¼–å†™åŸºäºå›¾å½¢è¯­æ³•çš„è½¯ä»¶åŒ…æœ‰äº†ç†è®ºä¾æ®å’Œè®¾è®¡å®è·µæŒ‡å¯¼ã€‚ 1.1 å›¾å½¢ VS å›¾è¡¨æˆ‘ä»¬ç»å¸¸ç§°ç»Ÿè®¡å›¾ä¸ºâ€œæŸæŸå›¾â€æˆ–è€…â€œChartâ€ï¼Œä¾‹å¦‚é¥¼å›¾(pie chart)ã€æ¡å½¢å›¾(bar chart)ã€æŠ˜çº¿å›¾(line chart)ç­‰ã€‚åœ¨å›¾å½¢è¯­æ³•å­¦ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…æ¢è®¨å›¾è¡¨åˆ†ç±»ï¼Œå›¾å½¢å’Œå›¾è¡¨çš„åŒºåˆ«åœ¨äºå›¾å½¢æ˜¯æ¯”å›¾è¡¨æ›´åŸºæœ¬çš„è§†è§‰å…ƒç´ ã€‚ä¸€æ—¦æˆ‘ä»¬ç†è§£ï¼Œé¥¼å›¾å…¶å®æ˜¯å †å æ¡å½¢å›¾åœ¨æåæ ‡çš„å‘ˆç°ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨æåæ ‡ä¸‹æ„å»ºæ›´å¤šé²œä¸ºäººçŸ¥çš„å›¾å½¢ã€‚ å¦‚æœæˆ‘ä»¬æ˜¯åœ¨åŸ‹å¤´å¼€å‘æŸä¸ªç±»å‹å›¾è¡¨ï¼Œè€Œä¸æ˜¯åˆ¶å›¾ç¨‹åºï¼Œæˆ‘ä»¬å°†é¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š æˆ‘ä»¬ä¸å¯é¿å…æ— æ³•æ»¡è¶³äººä»¬æ‰€æœ‰çš„å›¾è¡¨å¯è§†åŒ–éœ€æ±‚ï¼Œå› ä¸ºäººä»¬çš„éœ€æ±‚æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œæˆ‘ä»¬æ— æ³•é©¬ä¸Šå»å¼€å‘å’Œæä¾›å¤§å®¶æƒ³è¦çš„å›¾è¡¨ æˆ‘ä»¬å¯èƒ½æ— æ³•å¤ç”¨ä¸åŒå›¾è¡¨çš„ä»£ç å’Œè®¾è®¡ æˆ‘ä»¬éœ€è¦æ€è€ƒæŠ½è±¡æ„æˆæ„æˆå›¾è¡¨çš„åŸºç¡€å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å›¾å½¢ç†è®ºï¼Œè€Œä¸æ˜¯åœ¨çº ç»“å…·ä½“çš„æŸä¸ªå›¾è¡¨ã€‚å¾ˆå¤šBIäº§å“å’Œå›¾è¡¨åº“åªæä¾›ä¸€äº›å›ºå®šçš„å›¾è¡¨ç±»å‹é€‰æ‹©ï¼Œè¿™æ ·æœ‰åˆ©äºç”¨æˆ·ä½¿ç”¨å’Œç†è§£ï¼ŒåŒæ—¶ç»™ç”¨æˆ·æä¾›äº†ä¾¿åˆ©ï¼Œä½†æ˜¯å¯¹æˆ‘ä»¬æ·±å…¥ç†è§£å›¾å½¢æ²¡æœ‰å‚è€ƒä»·å€¼ã€‚ 1.2 é¢å‘å¯¹è±¡è®¾è®¡æœ¬ä¹¦å¾ˆå¤šè§è§£éƒ½å—åˆ°äº†é¢å‘å¯¹è±¡è®¾è®¡çš„å¯å‘ï¼Œåœ¨å¤§å­¦è¯¾ç¨‹ä¸­æˆ‘ä»¬å°±å­¦ä¹ è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹äº†ï¼Œè¿™é‡Œä¸åšè¿‡å¤šçš„é˜è¿°äº†ï¼ŒçŸ¥ä¹æœ‰ä¸ªè¯é¢˜ï¼šå¦‚ä½•é€šä¿—æ˜“æ‡‚åœ°ä¸¾ä¾‹è¯´æ˜ã€Œé¢å‘å¯¹è±¡ã€å’Œã€Œé¢å‘è¿‡ç¨‹ã€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ è§£é‡Šçš„æŒºé€šä¿—æ˜“æ‡‚ã€‚ 1.3 ä¸€ä¸ªé¢å‘å¯¹è±¡çš„å›¾å½¢ç³»ç»Ÿåœ¨æ•°å­¦ä¸­ï¼Œå›¾(graph) æ˜¯ä»£è¡¨äº†æ»¡è¶³å…¬å¼çš„ç‚¹çš„é›†åˆï¼Œå®ƒæ˜¯ä¸å¯è§çš„ã€‚åœ¨ç‰©ç†ä¸­ï¼Œå›¾å½¢(graphic) æ˜¯å›¾(graph)çš„ç‰©ç†å‘ˆç°ï¼Œè¿™å°±ä½¿å¾—å›¾å½¢éœ€è¦å¤§å°ã€é¢œâ€‹â€‹è‰²ç­‰ç¾å­¦å±æ€§æ¥å‘ˆç°çš„ã€‚ åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œå›¾å½¢é€šå¸¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†å®ƒæœ¬èº«å…·æœ‰ä½ç½®ã€é¢œè‰²ã€åæ ‡ç­‰å¯¹è±¡çš„å±æ€§ï¼Œè¿™ä½¿å¾—è¯¥å›¾å½¢ç³»ç»Ÿå…·æœ‰é€šç”¨æ€§ï¼Œä½†è¿™åªæ˜¯åŸºäºä¸€äº›ç®€å•çš„å¯¹è±¡å’Œè§„åˆ™ï¼Œä¸‹é¢å°†ç»§ç»­æ­ç¤ºè¿™ç§ç³»ç»Ÿçš„ä¸°å¯Œæ€§ã€‚ å›¾å½¢åˆ›ä½œçš„ä¸‰ä¸ªé˜¶æ®µï¼šâ€¢ è§„æ ¼ï¼ˆSpecificationï¼‰â€¢ è£…é…ï¼ˆAssemblyï¼‰â€¢ å±•ç¤ºï¼ˆDisplayï¼‰ Specificationè¿™é‡Œ Specification å¯ä»¥ç†è§£ä¸ºæè¿°å›¾å½¢å±æ€§çš„è§„æ ¼æè¿°ï¼Œç”¨æˆ·å¯èƒ½ä¸éœ€è¦çŸ¥é“è¿™äº›è§„åˆ™ï¼Œä½†æ˜¯åˆ¶å›¾ç³»ç»Ÿéœ€è¦ç†è§£å’Œéµå¾ªè¿™äº›è§„åˆ™ã€è¯­æ³•ã€‚ ç»Ÿè®¡å›¾å½¢çš„è§„æ ¼æè¿°å¯ä»¥ç”¨ä»¥ä¸‹å…­ä¸ªè¯­å¥è¡¨ç¤ºï¼š DATA: æ•°æ®å¯è§†åŒ–åŸºäºçš„æ•°æ®æº TRANS: å¯¹æ•°æ®çš„ä¸€äº›è½¬åŒ–æ“ä½œï¼Œå¦‚èšåˆã€æ’åºã€ç­›é€‰ç­‰ SCALE: ç¼©æ”¾æ“ä½œï¼Œå¦‚log COORD: åæ ‡ç³»ç»Ÿï¼Œå¦‚æåæ ‡ç³»ã€ç›´è§’åæ ‡ç³» ELEMENT: å›¾å½¢çš„è§†è§‰å…ƒç´ ä¸å±æ€§ï¼Œå¦‚é¢œè‰²ã€å¤§å°ã€å½¢çŠ¶ GUIDE: æç¤ºä¿¡æ¯ï¼Œå¦‚åˆ»åº¦ã€å›¾ä¾‹ Assemblyä¸€ä¸ªåœºæ™¯ç”»é¢å’Œå®ƒçš„è§„æ ¼æè¿°è¿˜æ˜¯æœ‰å¾ˆå¤§ä¸åŒçš„ã€‚ä¸ºäº†ä¾æ®è§„æ ¼æè¿°ç»˜åˆ¶å‡ºç”»é¢ï¼Œæˆ‘ä»¬å¿…é¡»è¦å¤„ç†å®ƒçš„å‡ ä½•ã€å¸ƒå±€ã€ç¾å­¦å±æ€§ç­‰ç­‰æ¥ä½¿å®ƒçš„åœºæ™¯è¢«ç²¾å‡†åœ°æ¸²æŸ“å‡ºæ¥ã€‚ä¸€ä¸ªç»Ÿè®¡å›¾çš„åˆ¶å›¾ç³»ç»Ÿå’Œä½“ç³»å¿…é¡»è¦èƒ½å¤Ÿä»ä¸€ä»½è§„æ ¼è¯´æ˜è£…é…æˆä¸€å¹…çœŸæ­£çš„å›¾è¡¨ã€‚ Displayä¸ºäº†è®©æˆ‘ä»¬æ„ŸçŸ¥å›¾å½¢ï¼Œéœ€è¦å°†å›¾å½¢æ¸²æŸ“åœ¨æŸä¸€ç§ä»‹è´¨ä¸Šï¼Œä¾‹å¦‚ï¼šæ˜¾ç¤ºå™¨ã€æŠ¥çº¸ï¼Œè§†é¢‘ç­‰ã€‚é™¤äº†åŸºæœ¬çš„ç»˜å›¾åŠŸèƒ½å¤–ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½éœ€è¦å®ç°åˆ·æ–°ã€ä¸‹é’»ã€ä¸Šå·ã€ç¼©æ”¾ç­‰å¤æ‚çš„äº¤äº’ 1.4 ä¸¾ä¸ªä¾‹å­ ä¸‹é¢æ¥å®é™…ä½¿ç”¨å›¾å½¢åˆ›ä½œçš„ä¸‰ä¸ªé˜¶æ®µï¼š Specification 12345678ELEMENT: point(position(birth*death), size(0), label(country))ELEMENT: contour(position( smooth.density.kernel.epanechnikov.joint(birth*death)), color.hue())GUIDE: form.line(position((0,0),(30,30)), label(&quot;Zero Population Growth&quot;))GUIDE: axis(dim(1), label(&quot;Birth Rate&quot;))GUIDE: axis(dim(2), label(&quot;Death Rate&quot;)) ä¸Šé¢çš„è§„æ ¼æè¿°ä»…ä½¿ç”¨åˆ°äº†ELEMENTå’ŒGUIDEç»„ä»¶ï¼Œé‚£ä¹ˆDATAã€TRANSã€SCALEã€COORDéƒ½ä¸ºé»˜è®¤æ²¡æœ‰æ“ä½œï¼Œåæ ‡ç³»ä¸ºç¬›å¡å°”åæ ‡ç³»ã€‚ ç¬¬ä¸€ä¸ªELEMENTï¼šè¡¨ç¤ºä¸ºä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹çš„ä½ç½®ç”±birth*deathå†³å®šï¼Œè¿™ä¸ªç‚¹ä¸å®é™…æ˜¾ç¤ºï¼Œå› ä¸ºçš„sizeå¤§å°ä¸º0ï¼Œlabelå†…å®¹ä¸ºå›½å®¶åç§° ç¬¬äºŒä¸ªELEMENTï¼šè¡¨ç¤ºç­‰é«˜çº¿å›¾ï¼Œç”¨æ¥ä»£è¡¨ä¸åŒåŒºåŸŸä¸­å›½å®¶çš„å¯†åº¦ã€‚å½¼æ­¤é è¿‘çš„å›½å®¶è¶Šå¤šï¼Œå¯†åº¦ç­‰å€¼çº¿å°±è¶Šé«˜ã€‚ ç¬¬ä¸€ä¸ªGUIDEï¼šè¡¨ç¤ºé›¶äººå£å¢é•¿çº¿ï¼Œè¾…åŠ©çº¿å·¦è¾¹çš„å›½å®¶äººå£è¶‹å‘ä¸‹é™ï¼Œè¾…åŠ©çº¿å³è¾¹çš„å›½å®¶äººå£è¶‹å‘å¢é•¿ æ¥ä¸‹æ¥çš„ä¸¤ä¸ªGUIDEåˆ†åˆ«ç”¨æ¥è¡¨ç¤ºå‡ºç”Ÿç‡ã€æ­»äº¡ç‡çš„è½´ã€ä»¥åŠåˆ»åº¦ã€è½´åç§° å‚è€ƒé“¾æ¥ Antv: æ•°æ®å¯è§†åŒ–å›¾å½¢è¯­æ³•ç®€å² å›¾ä¹‹å…¸ æ­£ç»å¯è§†åŒ–: ç¬¬ä¸€ç«  å›¾å½¢è¯­æ³•å­¦ç®€ä»‹ [The Grammar of Graphics ç¬”è®°] 1.ä»‹ç»","link":"/the-grammar-of-graphics-chapter1/"},{"title":"ZRenderè®¾è®¡æ€è·¯åˆ†æ","text":"ZRenderæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Canvasç±»åº“ï¼ŒEChartå°±æ˜¯åœ¨ZRenderåŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œç»™EChartsæä¾›2Dç»˜åˆ¶èƒ½åŠ›ã€‚æˆ‘å¹³æ—¶çš„å·¥ä½œæ˜¯è´Ÿè´£BIç³»ç»Ÿçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å›¾è¡¨åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå€Ÿæ­¤æœºä¼šæ¥æ›´åŠ æ·±å…¥äº†è§£å¹³æ—¶ç”¨åˆ°çš„å·¥å…·å…¶åº•å±‚åŸç†ã€‚ ç®€ä»‹ZRender æ˜¯äºŒç»´ç»˜å›¾å¼•æ“ï¼Œå®ƒæä¾› Canvasã€SVGã€VML å¤šç§æ¸²æŸ“æ–¹å¼ã€‚ZRender ä¹Ÿæ˜¯ ECharts çš„æ¸²æŸ“å™¨ã€‚æ³¨æ„ï¼šæ–‡ç« çš„åˆ†ææ˜¯åŸºäºZRender 5.xç‰ˆæœ¬è¿›è¡Œã€‚ æ–‡æ¡£å®˜ç½‘ï¼šhttps://ecomfe.github.io/zrender-doc/public/ GitHubä¸»é¡µï¼šhttps://github.com/ecomfe/zrender Canvas API Docï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API SVG API Docï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/SVG Hello Worldåˆå§‹åŒ– ZRenderåœ¨ä½¿ç”¨ ZRender å‰éœ€è¦åˆå§‹åŒ–å®ä¾‹ï¼Œå…·ä½“æ–¹å¼æ˜¯ä¼ å…¥ä¸€ä¸ª DOM å®¹å™¨ï¼š 12import zrender from &quot;zrender&quot;;const zr = zrender.init(document.getElementById('main')); åˆ›å»ºå‡ºçš„è¿™ä¸ªå®ä¾‹å¯¹åº”æ–‡æ¡£ä¸­ zrender å®ä¾‹éƒ¨åˆ†çš„æ–¹æ³•å’Œå±æ€§ã€‚ åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ ZRender æä¾›äº†å°†è¿‘ 20 ç§å›¾å½¢ç±»å‹ï¼Œå¯ä»¥åœ¨æ–‡æ¡£ zrender.Displayable ä¸‹æ‰¾åˆ°ã€‚å¦‚æœæƒ³åˆ›å»ºå…¶ä»–å›¾å½¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ zrender.Path.extend è¿›è¡Œæ‰©å±•ã€‚ ä»¥åˆ›å»ºä¸€ä¸ªåœ†ä¸ºä¾‹ï¼š 12345678910111213const circle = new zrender.Circle({ shape: { cx: 50, cy: 50, r: 40 }, style: { fill: &quot;none&quot;, stroke: &quot;#F00&quot; }});zr.add(circle); åˆ›å»ºäº†ä¸€ä¸ªåœ†å¿ƒåœ¨ [50, 50] ä½ç½®ï¼ŒåŠå¾„ä¸º 40 åƒç´ çš„åœ†ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç”»å¸ƒä¸­ã€‚ ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§é€šè¿‡ a = new zrender.XXX æ–¹æ³•åˆ›å»ºäº†å›¾å½¢å…ƒç´ ä¹‹åï¼Œå¯ä»¥ç”¨ a.shape ç­‰å½¢å¼è·å–åˆ°åˆ›å»ºæ—¶è¾“å…¥çš„å±æ€§ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œåº”è¯¥ä½¿ç”¨ a.attr(key, value) çš„å½¢å¼ä¿®æ”¹ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘å›¾å½¢çš„é‡ç»˜ã€‚ä¾‹å­ï¼š 123circle.attr(&quot;shape&quot;, { r: 50 // åªæ›´æ–°åŠå¾„å¤§å°}); DEMO ç›®å½•ä»‹ç»12345678910111213141516171819srcâ”œâ”€ animation # åŠ¨ç”»æ“ä½œç›¸å…³â”œâ”€ contain # æ˜¯å¦åŒ…å«åˆ¤æ–­utilsâ”œâ”€ core # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘â”œâ”€ dom # domäº‹ä»¶å¤„ç†â”œâ”€ graphic # å„ç§å›¾å½¢çš„å®ä½“ï¼Œå›¾å½¢å®ä½“ï¼Œåˆ†è€Œæ²»ä¹‹çš„å›¾å½¢ç­–ç•¥ï¼Œå¯å®šä¹‰æ‰©å±•â”œâ”€ mixin # éœ€è¦è¿›è¡Œæ··å…¥çš„utilsâ”œâ”€ canvas # Canvasæ“ä½œå°è£…â”œâ”€ svg # SVGæ“ä½œå°è£…â”œâ”€ vml # VMLæ“ä½œå°è£…ï¼ŒVMLæ˜¯æ—©æœŸIEæµè§ˆå™¨ç»˜åˆ¶çŸ¢é‡å›¾å½¢çš„è¯­è¨€ï¼Œåè¢«SVGæ›¿ä»£â”œâ”€ tool # ç»˜ç”»æ‹“å±•å·¥å…·â”œâ”€ Element.ts # ZRenderä¸­æœ€åŸºç¡€çš„å…ƒç´ â”œâ”€ Handler.ts # Controllerå±‚ï¼Œæ§åˆ¶å±‚ï¼Œäº‹ä»¶äº¤äº’å¤„ç†ï¼Œå®ç°domå…ƒç´ çš„æ¨¡æ‹Ÿå°è£…â”œâ”€ Painter.ts # Viewå±‚ï¼Œè§†å›¾å±‚ï¼Œå…ƒç´ ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè§†å›¾æ¸²æŸ“ï¼Œç»˜åˆ¶å’Œæ›´æ–°æ§åˆ¶â”œâ”€ Storage.ts # Modelå±‚ï¼Œshapeæ•°æ®ç®¡ç†å±‚â”œâ”€ Layer.ts # å›¾å±‚ç®¡ç†â”œâ”€ config.ts # é…ç½®ä¿¡æ¯â”œâ”€ export.ts # å¯¼å‡ºâ””â”€ zrender.ts # å…¥å£ è®¾è®¡æ€æƒ³æ€»çš„æ¥è¯´ï¼ŒMVCæ ¸å¿ƒå°è£…å®ç°å›¾å½¢å­˜å‚¨ã€è§†å›¾æ¸²æŸ“å’Œäº¤äº’æ§åˆ¶ï¼š Stroage(M) : shapeæ•°æ®CURDç®¡ç† Painter(V) : canvaseå…ƒç´ ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè§†å›¾æ¸²æŸ“ï¼Œç»˜ç”»ï¼Œæ›´æ–°æ§åˆ¶ Handler(C) : äº‹ä»¶äº¤äº’å¤„ç†ï¼Œå®ç°å®Œæ•´domäº‹ä»¶æ¨¡æ‹Ÿå°è£… shape : å›¾å½¢å®ä½“ï¼Œåˆ†è€Œæ²»ä¹‹çš„å›¾å½¢ç­–ç•¥ï¼Œå¯å®šä¹‰æ‰©å±• tool : ç»˜ç”»æ‰©å±•ç›¸å…³å®ç”¨æ–¹æ³•ï¼Œå·¥å…·åŠè„šæ‰‹æ¶ å…¥å£åˆ†æ â¤µï¸æˆ‘ä»¬å¯ä»¥ä»package.jsonçš„mainå­—æ®µæˆ–è€…build/build.jsæ„å»ºæ–‡ä»¶äº†è§£åˆ°ï¼ŒZRenderçš„å…¥å£æ–‡ä»¶åœ¨/index.tsä¸­ï¼š 123456export * from './src/zrender';export * from './src/export';import './src/canvas/canvas';import './src/svg/svg';// import './src/vml/vml'; // 5.xæ³¨é‡Šäº†å¯¹IE VMLçš„æ”¯æŒ ä¸Šè¿°çš„ä¸¤ä¸ªexportè¯­å¥ï¼Œæ˜¯ç”¨æ¥åˆå§‹åŒ–ZRenderï¼Œé‚£ä¹ˆZRenderåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿå§ã€‚ ZRenderçš„å…¥å£é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œå…·ä½“ZRenderçš„å…¥å£æ˜¯ï¼šsrc/zrender.tsï¼Œæˆ‘ä»¬å…ˆå…·ä½“çœ‹ä¸‹è¿™çš„å®ç°é€»è¾‘ï¼š src/zrender.ts123456789101112131415161718192021222324252627282930313233343536373839404142434445464748let instances: { [key: number]: ZRender } = {};function delInstance(id: number) { delete instances[id];}class ZRender { ... }/** * Initializing a zrender instance*/export function init(dom: HTMLElement, opts?: ZRenderInitOpt) { const zr = new ZRender(zrUtil.guid(), dom, opts); instances[zr.id] = zr; return zr;}/** * Dispose zrender instance */export function dispose(zr: ZRender) { zr.dispose();}/** * Dispose all zrender instances */export function disposeAll() { for (let key in instances) { if (instances.hasOwnProperty(key)) { instances[key].dispose(); } } instances = {};}/** * Get zrender instance by id */export function getInstance(id: number): ZRender { return instances[id];}export function registerPainter(name: string, Ctor: PainterBaseCtor) { painterCtors[name] = Ctor;}export const version = '5.0.1'; è¿™é‡Œçš„å…³é”®éƒ¨åˆ†æœ‰: class ZRender {...}: ZRenderç±»ï¼Œåç»­å†å±•å¼€åˆ†æ init(): åˆå§‹åŒ–ZRenderå®ä¾‹ï¼Œå¹¶ä»¥key-valueçš„å½¢å¼å­˜å‚¨åˆ°instanceså¯¹è±¡ä¸­ dispose(): é”€æ¯ ZRender å®ä¾‹ disposeAll(): é”€æ¯instancesä¸­æ‰€æœ‰çš„ZRenderå®ä¾‹ getInstance()ã€delInstance(): è·å–oråˆ é™¤instancesä¸­çš„å®ä¾‹ registerPainter(): æ³¨å†ŒCanvasã€SVGè§†å›¾å±‚é€»è¾‘ ZRenderçš„exporté™¤äº†ä¸Šé¢çš„src/zrender.tsæ¨¡å—ï¼Œå…¥å£æ–‡ä»¶è¿˜å¯¼å‡ºäº†src/exportsï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š src/exports.ts >folded123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/** * Do not mount those modules on 'src/zrender' for better tree shaking. */import * as zrUtil from './core/util';import * as matrix from './core/matrix';import * as vector from './core/vector';import * as colorTool from './tool/color';import * as pathTool from './tool/path';import {parseSVG} from './tool/parseSVG';import {morphPath} from './tool/morphPath';export {default as Point} from './core/Point';export {default as Element} from './Element';export {default as Group} from './graphic/Group';export {default as Path} from './graphic/Path';export {default as Image} from './graphic/Image';export {default as CompoundPath} from './graphic/CompoundPath';export {default as TSpan} from './graphic/TSpan';export {default as IncrementalDisplayable} from './graphic/IncrementalDisplayable';export {default as Text} from './graphic/Text';export {default as Arc} from './graphic/shape/Arc';export {default as BezierCurve} from './graphic/shape/BezierCurve';export {default as Circle} from './graphic/shape/Circle';export {default as Droplet} from './graphic/shape/Droplet';export {default as Ellipse} from './graphic/shape/Ellipse';export {default as Heart} from './graphic/shape/Heart';export {default as Isogon} from './graphic/shape/Isogon';export {default as Line} from './graphic/shape/Line';export {default as Polygon} from './graphic/shape/Polygon';export {default as Polyline} from './graphic/shape/Polyline';export {default as Rect} from './graphic/shape/Rect';export {default as Ring} from './graphic/shape/Ring';export {default as Rose} from './graphic/shape/Rose';export {default as Sector} from './graphic/shape/Sector';export {default as Star} from './graphic/shape/Star';export {default as Trochoid} from './graphic/shape/Trochoid';export {default as LinearGradient} from './graphic/LinearGradient';export {default as RadialGradient} from './graphic/RadialGradient';export {default as Pattern} from './graphic/Pattern';export {default as BoundingRect} from './core/BoundingRect';export {default as OrientedBoundingRect} from './core/OrientedBoundingRect';export {matrix};export {vector};export {colorTool as color};export {pathTool as path};export {zrUtil as util};export {parseSVG};export {morphPath};export {default as showDebugDirtyRect} from './debug/showDebugDirtyRect'; å¯ä»¥çœ‹åˆ°ï¼Œexport.tsçš„èŒè´£æ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—åˆ°å¤–éƒ¨ã€‚å…¶ä¸­åŒ…æ‹¬coreã€toolä¸­çš„å·¥å…·å‡½æ•°æ–¹æ³•ï¼Œä»¥åŠZRenderæŠ½è±¡å‡ºæ¥çš„å„ç§shapeå›¾å½¢æ¨¡å—ï¼Œæ–¹ä¾¿ä»¥zrender.xxæ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚ å¦å¤–ï¼Œæ¨¡å—çš„ç¬¬ä¸€è¡Œæ³¨é‡Šå†™åˆ°ï¼šDo not mount those modules on â€˜src/zrenderâ€™ for better tree shakingï¼Œç›¸æ¯”åœ¨src/zrender.tsä¸­ä¸€è‚¡è„‘è¿›è¡Œå¯¼å‡ºå’Œè°ƒç”¨ï¼Œexport.tså¯¼å‡ºçš„éƒ½æ˜¯æ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œæ›´åŠ æœ‰åˆ©äºæ„å»ºå·¥å…·å¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æè¿›è¡ŒTree Shakingï¼Œé¿å…EChartsä½¿ç”¨ZRenderæ—¶ï¼Œæ‰“åŒ…äº†æœªå®é™…ä½¿ç”¨çš„ä»£ç ã€‚ Painterç”»ç¬”æ³¨å†Œæ³¨å†Œå‰æœŸåŸºæœ¬å·¥ä½œå·²ç»ä»‹ç»å®Œäº†ï¼ŒZRenderæ˜¯å¦‚ä½•å°†å›¾å½¢ç»˜åˆ¶å‡ºæ¥çš„å‘¢ï¼Ÿå…¶å®ç°åœ¨å‰ç«¯ä¸»æµçš„2Dç»˜åˆ¶æ–¹å¼æœ‰ä¸¤ç§ï¼šCanvaså’ŒSVGï¼Œé‚£ä¹ˆZRenderå°±éœ€è¦åˆ†åˆ«å°è£…Canvaså’ŒSVGå„è‡ªçš„APIï¼Œæ¥æŠ¹å¹³ä¸åŒç»˜åˆ¶æ–¹å¼åœ¨ä½¿ç”¨æ—¶å€™çš„å·®å¼‚ï¼š å¯¼å…¥ç”»ç¬” index.ts123456export * from './src/zrender';...import './src/canvas/canvas';import './src/svg/svg';// import './src/vml/vml'; æ³¨å†ŒCanvasç”»ç¬” src/canvas/canvas.ts12345import './graphic';import {registerPainter} from '../zrender';import Painter from './Painter';registerPainter('canvas', Painter); æ³¨å†ŒSVGç”»ç¬” src/svg/svg.ts12345import './graphic';import {registerPainter} from '../zrender';import Painter from './Painter';registerPainter('svg', Painter); ä¸Šé¢ğŸ‘†ä»£ç çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šåœ¨åˆå§‹åŒ–æ‰§è¡Œå®Œzrenderåï¼Œè°ƒç”¨registerPainter()æ–¹æ³•æ¥æŠŠç”»ç¬”ğŸ–Œæ³¨å†Œåˆ°å…¨å±€çš„zrenderä¸­ï¼Œå…¶ä¸­ï¼š graphicæ¨¡å—: å°è£…å½¢çŠ¶ã€å›¾ç‰‡ã€æ–‡æœ¬â€¦ç»˜åˆ¶å‡½æ•° Painteræ¨¡å—: æä¾›ç»™zrenderè¿›è¡Œå›¾å½¢ç»˜åˆ¶ VMLå¯ä»¥çœ‹åˆ°5.xç‰ˆæœ¬æ³¨é‡Šäº†VML(Vector Markup Language)ç”»ç¬”ï¼Œä¸äº†è§£VMLçš„å¯ä»¥å°†VMLç†è§£ä¸ºSVGçš„ç¥–å…ˆï¼Œç”¨äºå…¼å®¹ä½ç‰ˆæœ¬IEæµè§ˆå™¨ã€‚VMLç»´åŸºç™¾ç§‘å®šä¹‰ï¼š Vector Markup Languageï¼ˆVMLï¼‰æ˜¯ä¸€ç§XMLè¯­è¨€ç”¨äºç»˜åˆ¶çŸ¢é‡å›¾å½¢ï¼ˆvector graphicsï¼‰ã€‚1998å¹´VMLå»ºè®®ä¹¦ç”±å¾®è½¯ã€Macromediaç­‰å‘W3Cæå‡ºå®¡æ ¸ã€‚VMLé­åˆ°æ‹’ç»ï¼Œå› ä¸ºAdobeã€Sunç­‰æå‡ºäº†PGML[1]è®¡åˆ’ä¹¦ã€‚è¿™ä¸¤å¥—æ ‡å‡†åæ¥åˆå¹¶æˆæ›´å…·æ½œåŠ›çš„SVGã€‚ new ZRenderåœ¨å¹²å˜› ğŸ§©ä»‹ç»æˆ‘ä»¬ä¹‹å‰æåˆ°çš„åˆå§‹åŒ– ZRenderä¸­ï¼Œåˆå§‹åŒ–ä¸€ä¸ªZRenderå®ä¾‹å¹¶æ²¡æœ‰åˆ°newè¯­å¥ï¼Œå…¶å®æ˜¯åœ¨init()ä¸­æ‰§è¡Œçš„class ZRenderï¼Œç„¶åä¾›ç»™å¯¼å‡ºå¤–éƒ¨è°ƒç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š src/zrender.ts12345export function init(dom: HTMLElement, opts?: ZRenderInitOpt) { const zr = new ZRender(zrUtil.guid(), dom, opts); instances[zr.id] = zr; return zr;} ç»™new ZRenderåˆ†ç±»å› ä¸ºclass ZRenderå†…çš„é€»è¾‘è¾ƒå¤šï¼Œä¸‹é¢ä»£ç ç”¨æ³¨é‡Šå°†ç±»ä¼¼åŠŸèƒ½åˆ†éš”å¼€æ¥ï¼Œè¿™æ ·èƒ½å¤Ÿçœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®zrenderå®ä¾‹åŒ…å«äº†ä»¥ä¸‹ä¸‰å¤§åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿå’ŒMVCåˆ†å±‚å¯¹åº”ï¼š å›¾å½¢å­˜å‚¨å±‚ ç®¡ç†å­˜å‚¨ç”»å¸ƒå†…çš„å…ƒç´ ï¼Œå¯¹åº”Storageç›¸å…³çš„é€»è¾‘ï¼Œæä¾›å¯¹Elementçš„å¢åˆ æŸ¥æ”¹æ“ä½œ è§†å›¾ç»˜åˆ¶å±‚ Painterç»˜åˆ¶å›¾å½¢å…ƒç´ ï¼Œåˆ›å»ºå’Œä¿®æ”¹DOMå…ƒç´ ï¼Œè¿›è¡Œrefreshã€flushç­‰ç»˜åˆ¶æ“ä½œ é€»è¾‘æ§åˆ¶å±‚ Handlerè´Ÿè´£clickã€mouseã€hoverç­‰äº‹ä»¶çš„å¤„ç† src/zrender.ts >folded123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869class ZRender { id: number // unique id dom: HTMLElement // zrenderå®¹å™¨dom storage: Storage // mvc model painter: PainterBase // mvc view handler: Handler // mvc control animation: Animation // åŠ¨ç”» TODO:å­¦ä¹  ... constructor(id: number, dom: HTMLElement, opts?: ZRenderInitOpt) {...} // ============= å›¾å½¢å­˜å‚¨ç›¸å…³ ============= add(el: Element) {...} remove(el: Element) {...} // ============= TODO: å¾…å­¦ä¹  ============= configLayer(zLevel: number, config: LayerConfig) {...} // ============= èƒŒæ™¯é¢œè‰²ç›¸å…³ ============= private _backgroundColor: string | GradientObject | PatternObject; --&gt; setBackgroundColor(backgroundColor: string | GradientObject | PatternObject) {...} getBackgroundColor() {...} // ============= æš—é»‘æ¨¡å¼ç›¸å…³ ============= setDarkMode(darkMode: boolean) {...} isDarkMode() {...} // ============= åˆ·æ–°ç»˜åˆ¶ç›¸å…³ ============= refreshImmediately(fromInside?: boolean) {...} refresh() {...} flush() {...} private _flush(fromInside?: boolean) {...} setSleepAfterStill(stillFramesCount: number) {...} wakeUp() {...} refreshHover() {...} refreshHoverImmediately() {...} clearAnimation() {...} // ============= DOMå®¹å™¨ç›¸å…³ ============= resize(opts?: { width?: number| string height?: number | string }) {...} getWidth(): number {...} getHeight(): number {...} // ============= å…¶ä»– ============= pathToImage(e: Path, dpr: number) {...} setCursorStyle(cursorStyle: string) {...} findHover(x: number, y: number): { target: Displayable, topTarget: Displayable } {...} // ============= è‡ªå®šä¹‰äº‹ä»¶ç›¸å…³ ============= on&lt;Ctx&gt;(eventName: eventHandler: , context?: Ctx): this {...} off(eventName?: string, eventHandler?: EventCallback&lt;unknown, unknown&gt;) {...} trigger(eventName: string, event?: unknown) {...} // ============= å¸è½½ã€æ¸…ç†ç›¸å…³ ============= clear() {...} dispose() {...}} Storageåˆ†æ ğŸ—‚ï¸Storageå¯¹åº”MVCå±‚ä¸­çš„Modelï¼Œå³æ•°æ®çš„ä¿å­˜ï¼Œï¼Œå…·ä½“æ¥å£ç±»å®šä¹‰å¦‚ä¸‹ï¼š src/Storage.ts12345678export default class Storage { private _roots: Element[] = [] private _displayList: Displayable[] = [] private _displayListLen = 0} _roots Element[]ï¼šå­˜å‚¨zrender.add(Element)æ·»åŠ è¿›æ¥çš„å…ƒç´  _displayList: Displayable[]ï¼šå­˜å‚¨å¯æ˜¾ç¤ºçš„å…ƒç´ (ç»§æ‰¿è‡ªDisplayableçš„å…ƒç´ )ï¼Œæä¾›ç»™Painterè¿›è¡Œæ¸²æŸ“ Storageæ¥å£ç±»çš„å…¶ä»–éƒ¨åˆ†é€»è¾‘éƒ½æ˜¯æ˜¯å¯¹ä¸Šé¢ä¸¤ä¸ªæ•°ç»„çš„å¢åˆ æŸ¥æ”¹çš„å°è£…ï¼Œæ–¹ä¾¿ç»™å…¶ä»–æ¨¡å—è°ƒç”¨è€Œå·²ã€‚ å‚è€ƒé“¾æ¥ InfoQ: å¯è§†åŒ–äº†è§£ä¸€ä¸‹ï¼Ÿ ECharts 4.0æœ€å…¨æŠ€æœ¯æ”»ç•¥ FunDeug: é…ç½®Tree Shakingæ¥å‡å°‘JavaScriptçš„æ‰“åŒ…ä½“ç§¯","link":"/zrender-source-code/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"é»‘è‹¹æœ","slug":"é»‘è‹¹æœ","link":"/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/"},{"name":"OpenWrt","slug":"OpenWrt","link":"/tags/OpenWrt/"},{"name":"Lede","slug":"Lede","link":"/tags/Lede/"},{"name":"iKuai","slug":"iKuai","link":"/tags/iKuai/"},{"name":"å›¾å½¢è¯­æ³•å­¦","slug":"å›¾å½¢è¯­æ³•å­¦","link":"/tags/%E5%9B%BE%E5%BD%A2%E8%AF%AD%E6%B3%95%E5%AD%A6/"},{"name":"Canvas","slug":"Canvas","link":"/tags/Canvas/"},{"name":"SVG","slug":"SVG","link":"/tags/SVG/"},{"name":"ZRender","slug":"ZRender","link":"/tags/ZRender/"},{"name":"ECharts","slug":"ECharts","link":"/tags/ECharts/"}],"categories":[{"name":"ç¬”è®°æœ¬","slug":"ç¬”è®°æœ¬","link":"/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/"},{"name":"é»‘è‹¹æœ","slug":"é»‘è‹¹æœ","link":"/categories/%E9%BB%91%E8%8B%B9%E6%9E%9C/"},{"name":"è½¯è·¯ç”±","slug":"è½¯è·¯ç”±","link":"/categories/%E8%BD%AF%E8%B7%AF%E7%94%B1/"},{"name":"å¯è§†åŒ–","slug":"å¯è§†åŒ–","link":"/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/"},{"name":"å›¾å½¢è¯­æ³•å­¦","slug":"å¯è§†åŒ–/å›¾å½¢è¯­æ³•å­¦","link":"/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/%E5%9B%BE%E5%BD%A2%E8%AF%AD%E6%B3%95%E5%AD%A6/"},{"name":"ZRender","slug":"å¯è§†åŒ–/ZRender","link":"/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/ZRender/"}]}