<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ - å‘é…µ</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#fff"><meta name="application-name" content="å‘é…µ"><meta name="msapplication-TileImage" content="https://hexo-deployer-cos-1251671242.cos.ap-beijing.myqcloud.com/avatar.png"><meta name="msapplication-TileColor" content="#fff"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="å‘é…µ"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="32" href="https://hexo-deployer-cos-1251671242.cos.ap-beijing.myqcloud.com/avatar.png"><link rel="apple-touch-icon" sizes="*" href="https://hexo-deployer-cos-1251671242.cos.ap-beijing.myqcloud.com/avatar.png"><link rel="apple-touch-icon" sizes="32" href="https://hexo-deployer-cos-1251671242.cos.ap-beijing.myqcloud.com/avatar.png"><meta description="ZRenderæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Canvasç±»åº“ï¼ŒEChartå°±æ˜¯åœ¨ZRenderåŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œç»™EChartsæä¾›2Dç»˜åˆ¶èƒ½åŠ›ã€‚æˆ‘å¹³æ—¶çš„å·¥ä½œæ˜¯è´Ÿè´£BIç³»ç»Ÿçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å›¾è¡¨åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå€Ÿæ­¤æœºä¼šæ¥æ›´åŠ æ·±å…¥äº†è§£å¹³æ—¶ç”¨åˆ°çš„å·¥å…·å…¶åº•å±‚åŸç†ã€‚"><meta property="og:type" content="blog"><meta property="og:title" content="ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ"><meta property="og:url" content="https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/"><meta property="og:site_name" content="å‘é…µ"><meta property="og:description" content="ZRenderæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Canvasç±»åº“ï¼ŒEChartå°±æ˜¯åœ¨ZRenderåŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œç»™EChartsæä¾›2Dç»˜åˆ¶èƒ½åŠ›ã€‚æˆ‘å¹³æ—¶çš„å·¥ä½œæ˜¯è´Ÿè´£BIç³»ç»Ÿçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å›¾è¡¨åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå€Ÿæ­¤æœºä¼šæ¥æ›´åŠ æ·±å…¥äº†è§£å¹³æ—¶ç”¨åˆ°çš„å·¥å…·å…¶åº•å±‚åŸç†ã€‚"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.ifajiao.com/gallery/covers/zrender-part1.png"><meta property="article:published_time" content="2021-01-02T00:00:00.000Z"><meta property="article:modified_time" content="2021-01-03T13:16:59.000Z"><meta property="article:author" content="å‘é…µ"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="Canvas"><meta property="article:tag" content="SVG"><meta property="article:tag" content="ZRender"><meta property="article:tag" content="ECharts"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/gallery/covers/zrender-part1.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/"},"headline":"å‘é…µ","image":["https://www.ifajiao.com/gallery/covers/zrender-part1.png"],"datePublished":"2021-01-02T00:00:00.000Z","dateModified":"2021-01-03T13:16:59.000Z","author":{"@type":"Person","name":"å‘é…µ"},"description":"ZRenderæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Canvasç±»åº“ï¼ŒEChartå°±æ˜¯åœ¨ZRenderåŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œç»™EChartsæä¾›2Dç»˜åˆ¶èƒ½åŠ›ã€‚æˆ‘å¹³æ—¶çš„å·¥ä½œæ˜¯è´Ÿè´£BIç³»ç»Ÿçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å›¾è¡¨åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå€Ÿæ­¤æœºä¼šæ¥æ›´åŠ æ·±å…¥äº†è§£å¹³æ—¶ç”¨åˆ°çš„å·¥å…·å…¶åº•å±‚åŸç†ã€‚"}</script><link rel="canonical" href="https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/"><link rel="icon" href="https://hexo-deployer-cos-1251671242.cos.ap-beijing.myqcloud.com/avatar.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?adce612da0693f1aaa2fd6e8bda1e86a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">å‘é…µ&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/fajiaopaopao"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/gallery/covers/zrender-part1.png" alt="ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-02T00:00:00.000Z" title="2021-01-02T00:00:00.000Z">2021-01-02</time>å‘è¡¨</span><span class="level-item"><time dateTime="2021-01-03T13:16:59.000Z" title="2021-01-03T13:16:59.000Z">2021-01-03</time>æ›´æ–°</span><span class="level-item"><a class="link-muted" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/">å¯è§†åŒ–</a><span>Â /Â </span><a class="link-muted" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/ZRender/">ZRender</a></span><span class="level-item">15 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2318ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ</h1><div class="content"><p>ZRenderæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Canvasç±»åº“ï¼ŒEChartå°±æ˜¯åœ¨ZRenderåŸºç¡€ä¸Šå»ºç«‹çš„ï¼Œç»™EChartsæä¾›2Dç»˜åˆ¶èƒ½åŠ›ã€‚æˆ‘å¹³æ—¶çš„å·¥ä½œæ˜¯è´Ÿè´£BIç³»ç»Ÿçš„å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°å›¾è¡¨åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå€Ÿæ­¤æœºä¼šæ¥æ›´åŠ æ·±å…¥äº†è§£å¹³æ—¶ç”¨åˆ°çš„å·¥å…·å…¶åº•å±‚åŸç†ã€‚</p>
<a id="more"></a>

<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ZRender æ˜¯äºŒç»´ç»˜å›¾å¼•æ“ï¼Œå®ƒæä¾› Canvasã€SVGã€VML å¤šç§æ¸²æŸ“æ–¹å¼ã€‚ZRender ä¹Ÿæ˜¯ ECharts çš„æ¸²æŸ“å™¨ã€‚æ³¨æ„ï¼šæ–‡ç« çš„åˆ†ææ˜¯åŸºäºZRenderæœ€æ–°ç‰ˆ5.xç‰ˆæœ¬è¿›è¡Œã€‚</p>
<ul>
<li>æ–‡æ¡£å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://ecomfe.github.io/zrender-doc/public/">https://ecomfe.github.io/zrender-doc/public/</a></li>
<li>GitHubä¸»é¡µï¼š<a target="_blank" rel="noopener" href="https://github.com/ecomfe/zrender">https://github.com/ecomfe/zrender</a></li>
<li>Canvas API Docï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API">https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API</a></li>
<li>SVG API Docï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/SVG">https://developer.mozilla.org/zh-CN/docs/Web/SVG</a></li>
</ul>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><h3 id="åˆå§‹åŒ–-ZRender"><a href="#åˆå§‹åŒ–-ZRender" class="headerlink" title="åˆå§‹åŒ– ZRender"></a>åˆå§‹åŒ– ZRender</h3><p>åœ¨ä½¿ç”¨ ZRender å‰éœ€è¦åˆå§‹åŒ–å®ä¾‹ï¼Œå…·ä½“æ–¹å¼æ˜¯ä¼ å…¥ä¸€ä¸ª DOM å®¹å™¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zrender <span class="keyword">from</span> <span class="string">&quot;zrender&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> zr = zrender.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;main&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå‡ºçš„è¿™ä¸ªå®ä¾‹å¯¹åº”æ–‡æ¡£ä¸­ <a target="_blank" rel="noopener" href="https://ecomfe.github.io/zrender-doc/public/api.html#zrender-instance-api">zrender</a> å®ä¾‹éƒ¨åˆ†çš„æ–¹æ³•å’Œå±æ€§ã€‚</p>
<h3 id="åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ "><a href="#åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ " class="headerlink" title="åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ "></a>åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ </h3><p>ZRender æä¾›äº†å°†è¿‘ 20 ç§å›¾å½¢ç±»å‹ï¼Œå¯ä»¥åœ¨æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://ecomfe.github.io/zrender-doc/public/api.html#zrenderdisplayable">zrender.Displayable</a> ä¸‹æ‰¾åˆ°ã€‚å¦‚æœæƒ³åˆ›å»ºå…¶ä»–å›¾å½¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ zrender.Path.extend è¿›è¡Œæ‰©å±•ã€‚</p>
<p>ä»¥åˆ›å»ºä¸€ä¸ªåœ†ä¸ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> zrender.Circle(&#123;</span><br><span class="line">  shape: &#123;</span><br><span class="line">    cx: <span class="number">50</span>,</span><br><span class="line">    cy: <span class="number">50</span>,</span><br><span class="line">    r: <span class="number">40</span></span><br><span class="line">  &#125;,</span><br><span class="line">  style: &#123;</span><br><span class="line">    fill: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">    stroke: <span class="string">&quot;#F00&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">zr.add(circle);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºäº†ä¸€ä¸ªåœ†å¿ƒåœ¨ [50, 50] ä½ç½®ï¼ŒåŠå¾„ä¸º 40 åƒç´ çš„åœ†ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç”»å¸ƒä¸­ã€‚</p>
<h3 id="ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§"><a href="#ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§" class="headerlink" title="ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§"></a>ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§</h3><p>é€šè¿‡ <code>a = new zrender.XXX</code> æ–¹æ³•åˆ›å»ºäº†å›¾å½¢å…ƒç´ ä¹‹åï¼Œå¯ä»¥ç”¨ <code>a.shape</code> ç­‰å½¢å¼è·å–åˆ°åˆ›å»ºæ—¶è¾“å…¥çš„å±æ€§ï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œåº”è¯¥ä½¿ç”¨ <code>a.attr(key, value)</code> çš„å½¢å¼ä¿®æ”¹ï¼Œå¦åˆ™ä¸ä¼šè§¦å‘å›¾å½¢çš„é‡ç»˜ã€‚ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">circle.attr(<span class="string">&quot;shape&quot;</span>, &#123;</span><br><span class="line">  r: <span class="number">50</span> <span class="comment">// åªæ›´æ–°åŠå¾„å¤§å°</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h3><iframe src="https://codesandbox.io/embed/zrender-hello-world-do706?autoresize=1&fontsize=14&hidenavigation=1&theme=light&view=preview"
     style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
     title="zrender-hello-world"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>



<h2 id="ç›®å½•ä»‹ç»"><a href="#ç›®å½•ä»‹ç»" class="headerlink" title="ç›®å½•ä»‹ç»"></a>ç›®å½•ä»‹ç»</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">â”œâ”€ animation  # åŠ¨ç”»æ“ä½œç›¸å…³</span><br><span class="line">â”œâ”€ contain    # æ˜¯å¦åŒ…å«åˆ¤æ–­utils</span><br><span class="line">â”œâ”€ core       # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span><br><span class="line">â”œâ”€ dom        # domäº‹ä»¶å¤„ç†</span><br><span class="line">â”œâ”€ graphic    # å„ç§å›¾å½¢çš„å®ä½“ï¼Œå›¾å½¢å®ä½“ï¼Œåˆ†è€Œæ²»ä¹‹çš„å›¾å½¢ç­–ç•¥ï¼Œå¯å®šä¹‰æ‰©å±•</span><br><span class="line">â”œâ”€ mixin      # éœ€è¦è¿›è¡Œæ··å…¥çš„utils</span><br><span class="line">â”œâ”€ canvas     # Canvasæ“ä½œå°è£…</span><br><span class="line">â”œâ”€ svg        # SVGæ“ä½œå°è£…</span><br><span class="line">â”œâ”€ vml        # VMLæ“ä½œå°è£…ï¼ŒVMLæ˜¯æ—©æœŸIEæµè§ˆå™¨ç»˜åˆ¶çŸ¢é‡å›¾å½¢çš„è¯­è¨€ï¼Œåè¢«SVGæ›¿ä»£</span><br><span class="line">â”œâ”€ tool       # ç»˜ç”»æ‹“å±•å·¥å…·</span><br><span class="line">â”œâ”€ Element.ts # ZRenderä¸­æœ€åŸºç¡€çš„å…ƒç´ </span><br><span class="line">â”œâ”€ Handler.ts # Controllerå±‚ï¼Œæ§åˆ¶å±‚ï¼Œäº‹ä»¶äº¤äº’å¤„ç†ï¼Œå®ç°domå…ƒç´ çš„æ¨¡æ‹Ÿå°è£…</span><br><span class="line">â”œâ”€ Painter.ts # Viewå±‚ï¼Œè§†å›¾å±‚ï¼Œå…ƒç´ ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè§†å›¾æ¸²æŸ“ï¼Œç»˜åˆ¶å’Œæ›´æ–°æ§åˆ¶</span><br><span class="line">â”œâ”€ Storage.ts # Modelå±‚ï¼Œshapeæ•°æ®ç®¡ç†å±‚</span><br><span class="line">â”œâ”€ Layer.ts   # å›¾å±‚ç®¡ç†</span><br><span class="line">â”œâ”€ config.ts  # é…ç½®ä¿¡æ¯</span><br><span class="line">â”œâ”€ export.ts  # å¯¼å‡º</span><br><span class="line">â””â”€ zrender.ts # å…¥å£</span><br></pre></td></tr></table></figure>

<h2 id="è®¾è®¡æ€æƒ³"><a href="#è®¾è®¡æ€æƒ³" class="headerlink" title="è®¾è®¡æ€æƒ³"></a>è®¾è®¡æ€æƒ³</h2><p>æ€»çš„æ¥è¯´ï¼ŒMVCæ ¸å¿ƒå°è£…å®ç°å›¾å½¢å­˜å‚¨ã€è§†å›¾æ¸²æŸ“å’Œäº¤äº’æ§åˆ¶ï¼š</p>
<ul>
<li>Stroage(M) : shapeæ•°æ®CURDç®¡ç†</li>
<li>Painter(V) : canvaseå…ƒç´ ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œè§†å›¾æ¸²æŸ“ï¼Œç»˜ç”»ï¼Œæ›´æ–°æ§åˆ¶</li>
<li>Handler(C) : äº‹ä»¶äº¤äº’å¤„ç†ï¼Œå®ç°å®Œæ•´domäº‹ä»¶æ¨¡æ‹Ÿå°è£…</li>
<li>shape : å›¾å½¢å®ä½“ï¼Œåˆ†è€Œæ²»ä¹‹çš„å›¾å½¢ç­–ç•¥ï¼Œå¯å®šä¹‰æ‰©å±•</li>
<li>tool : ç»˜ç”»æ‰©å±•ç›¸å…³å®ç”¨æ–¹æ³•ï¼Œå·¥å…·åŠè„šæ‰‹æ¶</li>
</ul>
<img src="/assets/2021-01-02/zrender.png" class="box px-0 py-0 ml-auto mr-auto" width="360" title="ZRender" alt="ZRender">

<h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><h3 id="å…¥å£åˆ†æ"><a href="#å…¥å£åˆ†æ" class="headerlink" title="å…¥å£åˆ†æ"></a>å…¥å£åˆ†æ</h3><p>æˆ‘ä»¬å¯ä»¥ä»<code>package.json</code>çš„<code>main</code>å­—æ®µæˆ–è€…<code>build/build.js</code>æ„å»ºæ–‡ä»¶äº†è§£åˆ°ï¼ŒZRenderçš„å…¥å£æ–‡ä»¶åœ¨<code>/index.ts</code>ä¸­ï¼š</p>
<figure class="highlight typescript"><figcaption><span>index.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./src/zrender&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./src/export&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./src/canvas/canvas&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./src/svg/svg&#x27;</span>;</span><br><span class="line"><span class="comment">// import &#x27;./src/vml/vml&#x27;; // 5.xæ³¨é‡Šäº†å¯¹IE VMLçš„æ”¯æŒ</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°çš„ä¸¤ä¸ªexportè¯­å¥ï¼Œæ˜¯ç”¨æ¥åˆå§‹åŒ–ZRenderï¼Œé‚£ä¹ˆZRenderåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬æ¥ä¸€æ¢ç©¶ç«Ÿå§ã€‚</p>
<h3 id="ZRenderçš„å…¥å£"><a href="#ZRenderçš„å…¥å£" class="headerlink" title="ZRenderçš„å…¥å£"></a>ZRenderçš„å…¥å£</h3><p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œå…·ä½“<code>ZRender</code>çš„å…¥å£æ˜¯ï¼š<code>src/zrender.ts</code>ï¼Œæˆ‘ä»¬å…ˆå…·ä½“çœ‹ä¸‹è¿™çš„å®ç°é€»è¾‘ï¼š</p>
<figure class="highlight typescript"><figcaption><span>src/zrender.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> instances: &#123; [key: <span class="built_in">number</span>]: ZRender &#125; = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delInstance</span>(<span class="params">id: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">delete</span> instances[id];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZRender</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Initializing a zrender instance</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">dom: HTMLElement, opts?: ZRenderInitOpt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> zr = <span class="keyword">new</span> ZRender(zrUtil.guid(), dom, opts);</span><br><span class="line">    instances[zr.id] = zr;</span><br><span class="line">    <span class="keyword">return</span> zr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Dispose zrender instance</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">dispose</span>(<span class="params">zr: ZRender</span>) </span>&#123;</span><br><span class="line">    zr.dispose();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Dispose all zrender instances</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">disposeAll</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> instances) &#123;</span><br><span class="line">        <span class="keyword">if</span> (instances.hasOwnProperty(key)) &#123;</span><br><span class="line">            instances[key].dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    instances = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get zrender instance by id</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInstance</span>(<span class="params">id: <span class="built_in">number</span></span>): <span class="title">ZRender</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> instances[id];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">registerPainter</span>(<span class="params">name: <span class="built_in">string</span>, Ctor: PainterBaseCtor</span>) </span>&#123;</span><br><span class="line">    painterCtors[name] = Ctor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> version = <span class="string">&#x27;5.0.1&#x27;</span>;</span><br></pre></td></tr></table></figure>


<p>è¿™é‡Œçš„å…³é”®éƒ¨åˆ†æœ‰: </p>
<ul>
<li><code>class ZRender &#123;...&#125;</code>: ZRenderç±»ï¼Œåç»­å†å±•å¼€åˆ†æ</li>
<li><code>init()</code>: åˆå§‹åŒ–ZRenderå®ä¾‹ï¼Œå¹¶ä»¥<em>key-value</em>çš„å½¢å¼å­˜å‚¨åˆ°<em>instances</em>å¯¹è±¡ä¸­</li>
<li><code>dispose()</code>: é”€æ¯ ZRender å®ä¾‹</li>
<li><code>disposeAll()</code>: é”€æ¯<em>instances</em>ä¸­æ‰€æœ‰çš„ZRenderå®ä¾‹</li>
<li><code>getInstance()ã€delInstance()</code>: è·å–oråˆ é™¤<em>instances</em>ä¸­çš„å®ä¾‹</li>
<li><code>registerPainter()</code>: æ³¨å†ŒCanvasã€SVGè§†å›¾å±‚é€»è¾‘</li>
</ul>
<h3 id="ZRenderçš„export"><a href="#ZRenderçš„export" class="headerlink" title="ZRenderçš„export"></a>ZRenderçš„export</h3><p>é™¤äº†ä¸Šé¢çš„<code>src/zrender.ts</code>æ¨¡å—ï¼Œå…¥å£æ–‡ä»¶è¿˜å¯¼å‡ºäº†<code>src/exports</code>ï¼Œå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><figcaption><span>src/exports.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Do not mount those modules on &#x27;src/zrender&#x27; for better tree shaking.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> zrUtil <span class="keyword">from</span> <span class="string">&#x27;./core/util&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> matrix <span class="keyword">from</span> <span class="string">&#x27;./core/matrix&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> vector <span class="keyword">from</span> <span class="string">&#x27;./core/vector&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> colorTool <span class="keyword">from</span> <span class="string">&#x27;./tool/color&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> pathTool <span class="keyword">from</span> <span class="string">&#x27;./tool/path&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;parseSVG&#125; <span class="keyword">from</span> <span class="string">&#x27;./tool/parseSVG&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;morphPath&#125; <span class="keyword">from</span> <span class="string">&#x27;./tool/morphPath&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Point&#125; <span class="keyword">from</span> <span class="string">&#x27;./core/Point&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Element&#125; <span class="keyword">from</span> <span class="string">&#x27;./Element&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Group&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/Group&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Path&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/Path&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Image&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/Image&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> CompoundPath&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/CompoundPath&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> TSpan&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/TSpan&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> IncrementalDisplayable&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/IncrementalDisplayable&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Text&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/Text&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Arc&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Arc&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> BezierCurve&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/BezierCurve&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Circle&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Circle&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Droplet&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Droplet&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Ellipse&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Ellipse&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Heart&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Heart&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Isogon&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Isogon&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Line&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Line&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Polygon&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Polygon&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Polyline&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Polyline&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Rect&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Rect&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Ring&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Ring&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Rose&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Rose&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Sector&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Sector&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Star&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Star&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Trochoid&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/shape/Trochoid&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> LinearGradient&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/LinearGradient&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> RadialGradient&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/RadialGradient&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> Pattern&#125; <span class="keyword">from</span> <span class="string">&#x27;./graphic/Pattern&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> BoundingRect&#125; <span class="keyword">from</span> <span class="string">&#x27;./core/BoundingRect&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> OrientedBoundingRect&#125; <span class="keyword">from</span> <span class="string">&#x27;./core/OrientedBoundingRect&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;matrix&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;vector&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;colorTool <span class="keyword">as</span> color&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;pathTool <span class="keyword">as</span> path&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;zrUtil <span class="keyword">as</span> util&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;parseSVG&#125;;</span><br><span class="line"><span class="keyword">export</span> &#123;morphPath&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> showDebugDirtyRect&#125; <span class="keyword">from</span> <span class="string">&#x27;./debug/showDebugDirtyRect&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>export.ts</code>çš„èŒè´£æ˜¯ç”¨æ¥å¯¼å‡ºæ¨¡å—åˆ°å¤–éƒ¨ã€‚å…¶ä¸­åŒ…æ‹¬<code>core</code>ã€<code>tool</code>ä¸­çš„å·¥å…·å‡½æ•°æ–¹æ³•ï¼Œä»¥åŠZRenderæŠ½è±¡å‡ºæ¥çš„å„ç§<code>shape</code>å›¾å½¢æ¨¡å—ï¼Œæ–¹ä¾¿ä»¥<code>zrender.xx</code>æ–¹å¼è¿›è¡Œè°ƒç”¨ã€‚</p>
<p>å¦å¤–ï¼Œæ¨¡å—çš„ç¬¬ä¸€è¡Œæ³¨é‡Šå†™åˆ°ï¼š<em>Do not mount those modules on â€˜src/zrenderâ€™ for better tree shaking</em>ï¼Œç›¸æ¯”åœ¨<code>src/zrender.ts</code>ä¸­ä¸€è‚¡è„‘è¿›è¡Œå¯¼å‡ºå’Œè°ƒç”¨ï¼Œ<code>export.ts</code>å¯¼å‡ºçš„éƒ½æ˜¯æ— å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œæ›´åŠ æœ‰åˆ©äºæ„å»ºå·¥å…·å¯¹ä»£ç è¿›è¡Œé™æ€åˆ†æè¿›è¡ŒTree Shakingï¼Œé¿å…EChartsä½¿ç”¨ZRenderæ—¶ï¼Œæ‰“åŒ…äº†æœªå®é™…ä½¿ç”¨çš„ä»£ç ã€‚</p>
<h3 id="ZRenderçš„ç”»ç¬”-ğŸ–Œ"><a href="#ZRenderçš„ç”»ç¬”-ğŸ–Œ" class="headerlink" title="ZRenderçš„ç”»ç¬” ğŸ–Œ"></a>ZRenderçš„ç”»ç¬” ğŸ–Œ</h3><p>å‰æœŸåŸºæœ¬å·¥ä½œå·²ç»ä»‹ç»å®Œäº†ï¼ŒZRenderæ˜¯å¦‚ä½•å°†å›¾å½¢ç»˜åˆ¶å‡ºæ¥çš„å‘¢ï¼Ÿ<br>å…¶å®ç°åœ¨å‰ç«¯ä¸»æµçš„2Dç»˜åˆ¶æ–¹å¼æœ‰ä¸¤ç§ï¼šCanvaså’ŒSVGï¼Œé‚£ä¹ˆZRenderå°±éœ€è¦åˆ†åˆ«å°è£…Canvaså’ŒSVGå„è‡ªçš„APIï¼Œæ¥æŠ¹å¹³ä¸åŒç»˜åˆ¶æ–¹å¼åœ¨ä½¿ç”¨æ—¶å€™çš„å·®å¼‚ï¼š</p>
<p><strong>å¯¼å…¥ç”»ç¬”</strong> </p>
<figure class="highlight typescript"><figcaption><span>index.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./src/zrender&#x27;</span>;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./src/canvas/canvas&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./src/svg/svg&#x27;</span>;</span><br><span class="line"><span class="comment">// import &#x27;./src/vml/vml&#x27;;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨å†ŒCanvasç”»ç¬”</strong> </p>
<figure class="highlight typescript"><figcaption><span>src/canvas/canvas.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./graphic&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;registerPainter&#125; <span class="keyword">from</span> <span class="string">&#x27;../zrender&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Painter <span class="keyword">from</span> <span class="string">&#x27;./Painter&#x27;</span>;</span><br><span class="line"></span><br><span class="line">registerPainter(<span class="string">&#x27;canvas&#x27;</span>, Painter);</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨å†ŒSVGç”»ç¬”</strong> </p>
<figure class="highlight typescript"><figcaption><span>src/svg/svg.ts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./graphic&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;registerPainter&#125; <span class="keyword">from</span> <span class="string">&#x27;../zrender&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Painter <span class="keyword">from</span> <span class="string">&#x27;./Painter&#x27;</span>;</span><br><span class="line"></span><br><span class="line">registerPainter(<span class="string">&#x27;svg&#x27;</span>, Painter);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ğŸ‘†ä»£ç çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šåœ¨åˆå§‹åŒ–æ‰§è¡Œå®Œzrenderåï¼Œè°ƒç”¨<code>registerPainter()</code>æ–¹æ³•æ¥æŠŠç”»ç¬”ğŸ–Œæ³¨å†Œåˆ°å…¨å±€çš„zrenderä¸­ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><strong>graphicæ¨¡å—</strong>: å°è£…å½¢çŠ¶ã€å›¾ç‰‡ã€æ–‡æœ¬â€¦ç»˜åˆ¶å‡½æ•°</li>
<li><strong>Painteræ¨¡å—</strong>: æä¾›ç»™zrenderè¿›è¡Œå›¾å½¢ç»˜åˆ¶</li>
</ul>
<p><strong>VML</strong><br>å¯ä»¥çœ‹åˆ°5.xç‰ˆæœ¬æ³¨é‡Šäº†VML(Vector Markup Language)ç”»ç¬”ï¼Œä¸äº†è§£VMLçš„å¯ä»¥å°†VMLç†è§£ä¸ºSVGçš„ç¥–å…ˆï¼Œç”¨äºå…¼å®¹ä½ç‰ˆæœ¬IEæµè§ˆå™¨ã€‚<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/VML%E8%AF%AD%E8%A8%80">VMLç»´åŸºç™¾ç§‘</a>å®šä¹‰ï¼š</p>
<blockquote>
<p>Vector Markup Languageï¼ˆVMLï¼‰æ˜¯ä¸€ç§XMLè¯­è¨€ç”¨äºç»˜åˆ¶çŸ¢é‡å›¾å½¢ï¼ˆvector graphicsï¼‰ã€‚1998å¹´VMLå»ºè®®ä¹¦ç”±å¾®è½¯ã€Macromediaç­‰å‘W3Cæå‡ºå®¡æ ¸ã€‚VMLé­åˆ°æ‹’ç»ï¼Œå› ä¸ºAdobeã€Sunç­‰æå‡ºäº†PGML[1]è®¡åˆ’ä¹¦ã€‚è¿™ä¸¤å¥—æ ‡å‡†åæ¥åˆå¹¶æˆæ›´å…·æ½œåŠ›çš„SVGã€‚</p>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è‡³æ­¤ï¼ŒZRenderçš„åˆå§‹åŒ–è¿‡ç¨‹åŸºæœ¬ä»‹ç»å®Œæ¯•ï¼Œæœ¬èŠ‚åªå¯¹ZRenderçš„ä¸»çº¿è¿›è¡Œäº†ç²—æµ…çš„ä»‹ç»ï¼Œåç»­å°†ä¸€å±‚ä¸€å±‚çš„æ¢ç´¢ZRenderçš„ç§˜å¯†ï¼Œæ­å¼€å®ƒçš„ç¥ç§˜é¢çº±ã€‚</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&mid=2651006663&idx=4&sn=1833bf61617c12aa5f4880508b25a9f9&chksm=bdbede948ac95782ff28cba0c35dd973a8a3b4094b4bd5113cfcf3b6838382e865dea2a9a092&mpshare=1&scene=1&srcid=0408sz6o6RYNUMdtftmDyJgb#rd">InfoQ: å¯è§†åŒ–äº†è§£ä¸€ä¸‹ï¼Ÿ ECharts 4.0æœ€å…¨æŠ€æœ¯æ”»ç•¥</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.fundebug.com/2018/08/15/reduce-js-payload-with-tree-shaking/">FunDeug: é…ç½®Tree Shakingæ¥å‡å°‘JavaScriptçš„æ‰“åŒ…ä½“ç§¯</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ</p><p><a href="https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/">https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>ä½œè€…</h6><p>å‘é…µ</p></div></div><div class="level-item is-narrow"><div><h6>å‘å¸ƒäº</h6><p>2021-01-02</p></div></div><div class="level-item is-narrow"><div><h6>æ›´æ–°äº</h6><p>2021-01-03</p></div></div><div class="level-item is-narrow"><div><h6>è®¸å¯åè®®</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons-nc"></i></a><a class="icon" rel="noopener" target="_blank" title="ShareAlike" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons-sa"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JavaScript/">JavaScript</a><a class="link-muted mr-2" rel="tag" href="/tags/Canvas/">Canvas</a><a class="link-muted mr-2" rel="tag" href="/tags/SVG/">SVG</a><a class="link-muted mr-2" rel="tag" href="/tags/ZRender/">ZRender</a><a class="link-muted mr-2" rel="tag" href="/tags/ECharts/">ECharts</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/12/13/pve-ikuai-lede-install/"><span class="level-item">n3540è½¯è·¯ç”±å®‰è£…pve+ikuai+openwrt(lede)åŒè½¯è·¯ç”±ç³»ç»Ÿè®°å½•</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">è¯„è®º</h3><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2.5/dist/disqusjs.css"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2.5/dist/disqus.js"></script><script>new DisqusJS({
            shortname: 'fajiao-2',
            apikey: "GreHyYSxtD9QEJOF23f0ZmPnbrbef4QjLrpwfAmrx0e4J060cSRg1ZsqY7ZZcyCt",
            siteName: "å‘é…µ",
            identifier: "2021/01/02/zrender-source-code-part1/",
            url: "https://www.ifajiao.com/2021/01/02/zrender-source-code-part1/",
            title: "ZRender æºç åˆ†æ Part1 - å‡†å¤‡å·¥ä½œ",
            
            
            
            
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">ç›®å½•</h3><ul class="menu-list"><li><a class="level is-mobile" href="#ç®€ä»‹"><span class="level-left"><span class="level-item">1</span><span class="level-item">ç®€ä»‹</span></span></a></li><li><a class="level is-mobile" href="#Hello-World"><span class="level-left"><span class="level-item">2</span><span class="level-item">Hello World</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#åˆå§‹åŒ–-ZRender"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">åˆå§‹åŒ– ZRender</span></span></a></li><li><a class="level is-mobile" href="#åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ "><span class="level-left"><span class="level-item">2.2</span><span class="level-item">åœ¨åœºæ™¯ä¸­æ·»åŠ å…ƒç´ </span></span></a></li><li><a class="level is-mobile" href="#ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">ä¿®æ”¹å›¾å½¢å…ƒç´ å±æ€§</span></span></a></li><li><a class="level is-mobile" href="#DEMO"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">DEMO</span></span></a></li></ul></li><li><a class="level is-mobile" href="#ç›®å½•ä»‹ç»"><span class="level-left"><span class="level-item">3</span><span class="level-item">ç›®å½•ä»‹ç»</span></span></a></li><li><a class="level is-mobile" href="#è®¾è®¡æ€æƒ³"><span class="level-left"><span class="level-item">4</span><span class="level-item">è®¾è®¡æ€æƒ³</span></span></a></li><li><a class="level is-mobile" href="#æºç åˆ†æ"><span class="level-left"><span class="level-item">5</span><span class="level-item">æºç åˆ†æ</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å…¥å£åˆ†æ"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">å…¥å£åˆ†æ</span></span></a></li><li><a class="level is-mobile" href="#ZRenderçš„å…¥å£"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">ZRenderçš„å…¥å£</span></span></a></li><li><a class="level is-mobile" href="#ZRenderçš„export"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">ZRenderçš„export</span></span></a></li><li><a class="level is-mobile" href="#ZRenderçš„ç”»ç¬”-ğŸ–Œ"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">ZRenderçš„ç”»ç¬” ğŸ–Œ</span></span></a></li></ul></li><li><a class="level is-mobile" href="#æ€»ç»“"><span class="level-left"><span class="level-item">6</span><span class="level-item">æ€»ç»“</span></span></a></li><li><a class="level is-mobile" href="#å‚è€ƒé“¾æ¥"><span class="level-left"><span class="level-item">7</span><span class="level-item">å‚è€ƒé“¾æ¥</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/"><span class="level-start"><span class="level-item">å¯è§†åŒ–</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/%E5%8F%AF%E8%A7%86%E5%8C%96/ZRender/"><span class="level-start"><span class="level-item">ZRender</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/"><span class="level-start"><span class="level-item">ç¬”è®°æœ¬</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AF%E8%B7%AF%E7%94%B1/"><span class="level-start"><span class="level-item">è½¯è·¯ç”±</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%BB%91%E8%8B%B9%E6%9E%9C/"><span class="level-start"><span class="level-item">é»‘è‹¹æœ</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Canvas/"><span class="tag">Canvas</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECharts/"><span class="tag">ECharts</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lede/"><span class="tag">Lede</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenWrt/"><span class="tag">OpenWrt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SVG/"><span class="tag">SVG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZRender/"><span class="tag">ZRender</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iKuai/"><span class="tag">iKuai</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%BB%91%E8%8B%B9%E6%9E%9C/"><span class="tag">é»‘è‹¹æœ</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">å‘é…µ&#039;s Blog</a><p class="is-size-7"><span>&copy; 2021 å‘é…µ</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent " target="_blank" rel="noopener" title="æ¹˜ICPå¤‡15014688å·" href="http://beian.miit.gov.cn/">æ¹˜ICPå¤‡15014688å·</a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>